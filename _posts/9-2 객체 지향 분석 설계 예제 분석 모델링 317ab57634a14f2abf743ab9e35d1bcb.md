# 9-2. 객체 지향 분석 설계 예제 분석 모델링

분석을 한다는 것은 유스케이스 다이어그램과 유스케이스 며엣서를 보고 분석 클래스 다이어그램(개념 클래스 다이어그램)을 그리고 정적인 측면만을 볼 수 있기 떄문에 동적인 측면을 보기 위해 유스케이스 실현 모델을 그려서 보충하면서 크래스다이어그램을 완성5

분석 클래스 다이어그램 만들기 어렵다 많이 사용하는 것이 세가지 클래스를 뽀바내느 것

개발하려는 시스템을 사용하는 사용자, 시스템 외부와 의사소통하는 부분 – 경계 클래스

실제로 일하는 부분 – 비지니스 클래스

시스템이 컴퓨터가 꺼저도 유지되는 기능 – 엔티티 클래스

클래스 종류 세개를 찾아서 클래스 다이어그램을 그리고 시퀀스 다이어그램으로 의사소통하는 것을 봐서 완성할 것

경계 클래스가 가장 많이 나옴. 실제 일하는 제어 클래스 한두개 나오고 엔티티 많이 나옴

분석단계에서 나오는 거고 설계단계가 되면 하나의 바운더리 클래스가 엄청 많아질 것, 제어 클래스와 엔티티도 마찬가지, 기법이나기술 라이브러리 등에 의해서 여러개노 나뉘어짐

아이콘이나 스테레오 타입으로 표현 가능

경계끼리 왔다갔다 할 수 있고 바운더리는 컨트롤에 위임 가능, 거꾸로는 불가, 리턴만 가능, 컨트롤이 엔티티에게 위임 가능, 바운더리에서 영속성으로 갈 수 없다 – 레이어를 쪼갠다. View -> business -> entity, 물리적인 노드의 경웅에도 tier로 나눠야 유지보수가 쉽다

분석 클래스 작성에는 유스케이스 다이어그램과 유스케이스 명세서를 보고 화면과 외부 시스테미나 장치가 있다면 각각에 해당되는 인터페이스를 만들어주면 된다.

View단이 프로트앤드인데 화면이 정말 많고 첨에는 비지니스가 어렵지만 계속 바뀌는 것이 프론트앤드!

화면을 설계해주면 사요자와 의사소통하기 쉽기에 같이 들어가고 흐름도도 같이 들어간다. Ui가 나오고 외부시스템이 있다면 si가 나오고 iot장치가 있다면 디바이스 클래스가 나올 것

제어 클래스는 유스케이스 하나당 한개가 나오고 유스케이스가 크면 여러개 작으면 여러개를 묶어서 하나로 관리

엔티티 클래스는 어딘가에 보관되어야 하는 것들을 찾아서 속성을 뽑고 엔티티는 er 다이어그램과 비슷

관계를 뽑애낸 뒤에 속성과 메소드를 찾아야 하는데 이건 명세서만 보고 찾기 어렵기에 시퀀스를 그려서 채워나가고 필요하면 상태 다이어그램 등을 그리면서 상호보완해나간다.

- 클래스다이어그램과 시퀀스 다이어글램은 꼭 있어야 하고 as is system에서 to be system으로 가는 경우 as is를 분석하는 것이 어려움. 사용자의 메뉴얼, 문서를 보면서 시퀀스를 그리고 그러면 클래스가 나오게 됨 -> 기술 적용해서 바운더리는 view, 비지니스는 business, 엔티티는 db단이 된다

로그인 화면이 있다면 입력받는 것은 in, 사용자가 하는 동작은 기능으로, 화면에 보이는 것은 속성으로

Ui 중에 버튼, 메뉴 선택은 연산으로!

그걸로 시퀀스를 그린다

외부 시스템 인터페이스의 경우에는 외부 시스템에 기능을 요청하는 연산이 있어야 하고 결과를 수신하고 외부상태가 어떤지 확인하는 연산이 필요할 수도 있음

Ex) 도서주문시스템을 사용하려면 si가 필요하고 도서주문 요청 함수와 도서주문상태조회, 이 두개는 1번이고 service는 도서주문결과처리를 외부에 서비스하는 것을 말함, 도서주문 요청을 다하면 다했으니까 결과처리하라고 요청하는 함수, 서비스는 외부가 자기일이 끝났을 때 우리의 시스템보고 일해라고 하는 것을 말함, Periodic은 주기적으로 잘돌아가는지 화인

Ex) 사서가 도서주문항목이라는 화면에서 주문신청을 하면 도서주문 관리화면으로 가고 얘가 일처리를 위해 도서주문관리에게 요청하고 얘는 외부에 있는 도서주문시스템을 사용하기 위해 도서주문시스템 si가 요청, 바로 올 수도 있고 아닐 수 도 있음.

Ex) 주기적으로 도서주문상태를 요청하는데 타이머가 주기적으로 상태가 화면에 갱신되어야하는데 화면은 그일을 못하니까 도서주문관리에게 일해라고 하고 얘는 모르니까 si에게 요청하면 얘가 외부시스템에게 갱신해달라고 햐서 리턴받아서 화면이 도서주문항목이 나와서 표현이 될 것

도서주문시스템(외부시스템)에서 처리해라고 si에게 보내고 가서 si는 business에 보내고 그걸 db에 저장. 외부시스템에서 메소드를 요청하기 위해 만든 함수가 service

속성들은 si 중에서는 접속 주소와 수신  주소 상태를 조회하니까 상태를 세팅해놓은 것, 중요한 것은 주소

Di 클래스의 경우에는 하드웨어와 소프트웨어가 의사소통하려면 di가 있어야 함.

속성은 버튼이면 층번호, 모터는 포터 도착센서는 자신이 몇층인지 지나가는 엘리베이터 중 번호가 먼지 등등

도착센서가 센싱했으면 센서가 시스템에게 정보를 주기 위해 di가 있고 얘가 control에게 전달

엘리베이터가 이동하는 것인데 컨트롤러가 위아래 결정하면 모터가 움직여야 하니까 경계 클래스로 알려준다.

경계클래스 찾는 것은 명세서만 있으면 금방 찾을 수 있음

#제어 클래스

명세서를 읽어서 시스템이 해야하는 일, 제어 클래스가 실제 일하는 부분이니까! 시스템이 먼가를 했다하면 그일은 제어 클래스가 하는 것

1번은 사용자가 하는 일

2번은 화면처리

3면은 도서를 출력하는 것은 시스템이 해야하는 일, 도서검색이라는 일을 해야 함

4번은 사용자가 하는 일

5번은 요청했으니까 상세조회화면을 나오게 하려면 조회한 결과가 나오려면 조회라는 일을 해야 한다.

컨트롤 클래스는 검색과 조회라는 일을 해야 한다(3,5)

잘모를 경우 시퀀스를 그리면 된다

도서검색을 하면 도서검색화면이 생기는데 여기서 제어객체를 만들고 검색을 하면 제어 클래스가 실제로 일을 할 것, 뒤에 엔티티까지 있을 것

이 클래스로 들어오는 화살표는 기능올 있어야 하니까 연산이 필요

도서명을 검색하면 도서검색결과화면을 보여주고 얘는 상세조회화면을 보여주는데 얘는 도서정보관리 컨트롤 클래스가 만들고 조회해달라고 하면 얘가 조회하고 결과 받고 화면보여주고 사용자가 확인 누르면 꺼진다.5번 함수도 필요

명세서를 보고 찾아야 하지만 명확하지 않으면 시퀀스를. 그리면 채울 수 있다

#엔티티 클래스

명세서를 읽다보면 저장되어야하는 부분을 엔티티 클래스로 만들고 관계들을 찾는다. 함수는 crud에 해당되는 곳이 있다. 디비 처리관련된 연산 혹은 연관된 객체를 관리하는 기능

도서관 사용자가 있고 책이 있다면 다중성은 다대다, 책 한궈당 열명에게 빌리 수 있고 한 며은 여러권을 빌릴 수 있음.구매자와 물품도 다대다임. 다대다의 경우에는 서로 알고 있어야 하므로 중간에 뽑아서 1:n 두개를 만듦. 사용자 책 사이에 중간에 하나 넣어서 표현

사용자 키와 책 키를 가지고 있음. 그러면 현재 관여하는 사용자와 책을 표현

대출정보는 사용자와 책정보에 접근할 수 있어야 하고 이러한 속성을 가져야 한다.

대출이라는 사건은 기록되어야하는데 관계되어야 하는 것은 대출의 고유정보와 관계하는 것이 사람과 관계에 있는 책 이렇게 찾아야 한다. 대출정보한테 대출정보를 알고싶으면 대출정보가 찍히는데 이때 사용자 정보를 알고 싶으면 연관관계로 타고 정보를 받아오면 된다.

주로 자신의 정보와 관계가 있는 다른 객체의 정보를 받아오는 기능도 존재 : 연관된 객체를 관리하는 기능

개별 도서(낱낱의 도서) 접근 시 발행일 서명 하려면 그건 연관관계를 타서 알아내느 것 : Get도서가 필요

도서대출정보에게 도서 이름을 조회하라고 하면 대출도서를 가져오고 얘한테 도서 달라고 해서 서명을 달라고 한다.

Crud기능과 관련된 다른 엔티티를 받는 기능이 필요하다.

Curd는 당연해서 생략할 수도 있다

#유스케이스 실현모델

시퀀스를 그림. 분석 클래스 다이어그램과 시퀀스는 동시에 수행되면서 왔다갔다 한다.

Ex) 대출신청자동취소 유스케이스

타이머가 타임아웃을 알려주면 시스템은 현시점을 계산해서 신청된 대출건에서 대출되지 않으면 대출신청을 모두 취소하고 sms를 통해서 통보

타이머가 처리하라고 할 것, 주로 밤 -> di가 도철대출관리에게 자동대출취소하라고 한다(2번은 컨트롤 클래스의 연산, 클래스를 그리면서 혹은 시쿼스를 그려서 체크 가능) -> 관리는 조회를 해보고 만료된 신청건이 있다면 엔티티에게 상태를 설정하고 sms에게 요청

시간경과처리는 service로 해야하고 sms는 5번에 해당되는 것이 있어야 하는 구나 혹은 일관성체크를 해야 한다.-> 업무를 잘해야 시퀀스를 그릴 수 있으므로 같이 해야 한다. As is가 있다면 돌려가면서 하고 도메인 지식이 필요

엑티비티 다이어그램은 화면 흐름에도 사용되고 같이 그리며 얘는 디자이너와 프론트앤드에게 전달됨, 이것도 그리고 화면도 그림

명세서를 보면 화면을 찾을 수 있고 기능은 첨에 안나오므로 유스케이스에서 찾아가서 나오는 것, 로그인 유스케이스와 암호변경 유스케이스를 보면서 연산이 채워나가게 된다.

로그인 관리에는 암호를 변경하는 기능, 사용자가 맞는지 확인, 등등으로 채워나간다.

메인화면은 로그인화면과 관련이있고 일은 사용자 관리가 한다. 암호변경로그아웃은 사용자관리에게 요청해야 한다.

아이디와 암호를 저장하기 위해 사용자정보 엔티티가 필요하고 얘의 crud기능도 필요

이걸가지고 시퀀스를 그리면 사용자는 아이디 암호 입력해서 로그인하면 컨트롤이 엔티티에게 물어보고 검색이 되면 암호를 조회해서 암호가 맞는지 비교, 암호가 일치하면 리턴되고 사용자별 화면이 표시되고 다르면 다시 돌아가고 불일치를 표시

아이디를 읽어왔을 때 검색이 안되면 아이디가 없다고 표시

암호변경

두번인력하고 변경하면 실제 일은 제어가 다 할 것, 엔티티에게 정보를 가져오고 갱신하라고 한다. 암호변경화면에서 성공화면을 모달을 띄어준다.

#학생관리 유스케이스

학사관리 메인화면에 학생과 교수관리가 있어야한다.

생성은 화면생성을 의미

학생목록을 여러개 가지고 있고 이름을 선택하면 상세조회가 됨

바운더리가 나오면 화면흐름이 같이 있어야 한다.

등록을 누르면 학생등록 화면이 뜨고 화면 흐름을 보고 화면을 보여주고 해당되는 속성과 연산을 알아냄

이름을 누르면 조회화면이 보일 것, 혹은 학생이 등록되면 보인다.

Crud할 때 조회해서 목록이 나오고 거기서 수정을 누르면 버튼이 되고 완료되면 리스트로 돌아간다. 즉, 화면이 이동할 때 디비에서 매번 읽어오면 부담이니까 키값을 hidden으로 넘기면서 이동한다. 세션으로 가질 수도 있음

어떤 학생을 수정할지 삭제할지 알아야 하니까

수정 화면의 경우 수정을 하기 위해서 inout으로 배치, 수정하는 기능과 생성하는 기능 필요

제어클래스가 하는 일을 하려면 하나하나 찾아봐야 함. 1번은 사람이 하는 것 2번은 화면 처리 3번은 액터가 하는 것

1번은 사람이 하는 것

2번은 시스템이 해야하는 것, 검색해야하니까

1번은 액터가 하는 거, 2번은 화면 보여주기, 3번은 사람이 하는거, 4번은 등록하는 일과 저장하는 일을 해줘야 한다. 5번은 사용자 계정을 만드러야 한다

도메인 전문가나 사용자와 함께 명세서를 작성해야하고 그래야 이걸로 뽑아낼 수 있음.

학생관리하다보니까 등록하면서 사용자 등록도 해야겠네 싶어서 추가하는 것

점점 확대됨

학생정보는 사용자 정보를 상속받음

시퀀스를 그리면서 하고 첨에 다 안나올 수도 있음 다른 유스케이스를 보면서 확대가 가능해짐

- 한꺼번에 작성되지 않고 쪼개서 실행되어야 한다. 쉽지 않은 편