# 9-2. Analysis Modeling

# 분석 모델링 기본 개념

## 분석 클래스의 유형

1) 경계 클래스(boundary class)

- 시스템과 외부 액터와의 상호작용을 전담하는 클래스
- 시스템의 기능 중에서 입력과 출력만을 전담하는 클래스

2) 제어 클래스(control class, business class)

- 시스템이 실제로 제공하는 비지니스 로직 및 제어  로직을 전담하는 클래스

비지니스 클래스는 일처리해주는 부분

3) 엔티티 클래스(entity class)

- 시스템이 유지해야하는 persistent data(시스템이 종료되어도 값이 유지되어야하는 데이터를 의미)를 관리하는 기능을 전담하는 클래스

영속성, perseistency 처리, 파일 처리해주는 부분

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled.png)

경계클래스는 사용할 시스템에 입력되는 부분, 출력되는 부분이고 디비와 관련된 건 엔티티 그 사이는 컨트롤

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%201.png)

ex)

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%202.png)

사용자가 도서검색해줘! 이러면 검색화면이 일하는 것이 아니라 컨트롤 클래스한테 위임시켜야 한다. 도서검색은 실제로 일하는 일을 하고 보통 자료는 디비와 파일로 들어있으므로 이건 엔티티 클래스가 해야 함

고유정보와 낱낱의 정보가 분리되어있으므로 이렇게 설계하고 정기와 비정기의 상속관게가 존재

바운더리에서 컨트롤, 컨트롤에서 엔티티는 가능, 단 레이어를 뛰어넘으면 안된다

# **1. 경계 클래스**

- 엑터와의 상호작용을 제공하는 클래스

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%203.png)

- 엑터의 유형에 따라서 경계 클래스는 세분화된다

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%204.png)

액터가 있으면 경계 클래스가 있어야 하고 액터 종류에는 세가지가 존재

ex)

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%205.png)

유저 인터페이스, 시스템 인터페이스, 디바이스 인터페이스 세개가 경계클래스, 엘리베이터에서 목적지층으로 가야한다면 엘리베이터는 외부 시스템이고 모터는 장치 인터페이스로 존재 유스케이스의 일은 클래스가 할 것

# 2. 제어 클래스

- 유스케이스의 비지니스/제어 로직을 제공
- 경계 클래스를 통하여 입력 받은 값을 정의된 요구사항에 따라서 적절한 출력 값을 산출하는 기능을 제공

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%206.png)

- 정의된 요구사항으로 처리, 실제로일하는 클래스, 유스케이스마다 적어도 하나의 컨트롤 클래스가 존재, 유스케이스는 사용자에게 기능해줘야하는 것이기 때문에 최소 한개 많을 수도 있음

ex)

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%207.png)

# 3. 엔티티 클래스

- 영속적인 정보의 관리 기능을 제공하는 클래스

명사로 되어있는 것 db에 저장되이어야 할 거 같은 것, 시스템이 종료되더라도 남아있는 경욱

엔티티 클래스는 db기술이 많고 c++에서도 여러 기법이 있으므로 나중에 여러개로 쪼개질 것

### 속성

- 엔티티클래스가 관리해야할 정보항목

### 연산

- 데이터 관리 기능

ex) 학생이라는 테이블을 나타내는 클래스와 CRUD를 하는 클래스, 최소한 두개의 클래스가 설계 시 생길 것, 분석단계에서는 한개(기술에 의해서 세개까지 가능)

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%208.png)

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%209.png)

레이어마다 학생정보를 들고 다니기떄문에 매개변수로 덩어리를 넘어야 할 때에는 dto(data transfer object), 사용자는 ui에게 넘기면서 자신의 정보를 넘겨줌. 그 때의 정보 덩어리를 dto

실제 디비처리를 해주는 개념 dao(data access object)디비에 따라서 접근방법이 다르고 이걸로 crud기능을 한다.

→ 엔티티 클래스 하나가 dto 하나와 dao 하나로 주로 구성됨

## 분석 클래스 간의 관계

분석 클래스를 찾았으면 관계를 표현해야하는데 이것은 유스케이스 실현 모델(시퀀스)을 보면 알 수 있다. 결국 이 관계는 요구사항에서 찾은 유스케이스를 실현하기 위한 클래스 간의 관계를 찾아낸다

- 클래스 간의 협력을 위해서는 해당 클래스 간에 메시지 전달을 위한 관계가 정의되어있어야 한다
- 분석 클래스 간의 관계는 유스케이스 실현을 위한 클래스 간의 관계를 표현

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2010.png)

신청 ui는 수강신청에게 일을 시킬 것이고 수강신청 ui는 수강신청을 알지만 반대는 아님.

컨트롤은 엔티티를 앎. 바운더리는 의존관계

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2011.png)

학생은 ui에게 수강신청을 요청하고 ui는 제어 클래스에게 정보를 달라고 하고 디비에서 과목한테 달라고 해서 리턴되어가서 ui에 보일 것

수강신청과목에 요청해서 학생이 신청한 내용이 디비에 저장될 것 이걸로 수강료 청구시스템을 요청하기 위해 바운더리로 소통

### UI 클래스 간의 관계

- 사용자 인터페이스 화면 간의 관계를 표현

Ui간의 관계는 화면간의 관계를 나타냄 이건 그냥 보면 됨

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2012.png)

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2013.png)

프로젝트마다 아키텍처에 의해 다를 수 있음

### 제어 클래스 간의 관계

- 일반적으로 유스케이스마다 해당 유스케이스의 비지니스/제어 로직을 실행하는 제어클래스가 하나씩 도출
- 비지니스/제어 로직이 복잡하다면 여러 개의 제어 클래스가 사용될 수 있다

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2014.png)

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2015.png)

포함 : 보조는 주의 모든 연산에서 사용

의존 : 보조는 주의 특정 연산 속에서만 사용

집합 : 보조가 주 의외에 다른 클래스에서도 사용됨

### 엔티티 클래스 간의 관계

- 영속적인 데이터 간의 관계를 표현
- er 다이어그램과 거의 동일

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2016.png)

### 분석 클래스 간의 관계 제약사항

- boundary→ control → entity로만 접근 가능
- 거꾸로 가거나 뛰어가는 것은 불가

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2017.png)

# 분석 클래스 모델의 작성

## 경계 클래스 도출 : UI 클래스 도출

명세서를 보고 경계 클래스를 찾는게 제일 쉬움

어떤 화면들은 다 ui일 것

- UI 클래스 및 관계는 유스케이스 시나리오를 바탕으로 분석하도록 한다

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2018.png)

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2019.png)

유저 인터페이스를 다 찾아서 항목들까지 다나오게 되면 컨트롤 클래스, 엔티티, 바운더리 클래스중 boundary class는 디자이너와 프론트 앤드(UI)가 하고 entity쪽은 dto, table은 db  전문가 나머지 부분은 개발자가 한다

- 사용자 화면 구성은 UI 클래스 간의 관계로 표현

정확한 화면은 안그리고 일단 만들면 디자이너가 함,dropbox,textbox 등등은 나중에 프론트앤드가 할 것

화면을 같이 설계하기 시작함

정확한 화면은 아니지만 사용자와 의사소통 가능하기 때문

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2020.png)

- 여러 화면사이에 공유되는 정보는 세션 클래스로 표현

유지되어야하는 정보는 세션으로 둔다. 

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2021.png)

→ 가장 쉬운게 ui찾는 것, 유스케이스 명세서만 잘 작성되어있으면 찾을 수 있다.

이걸 찾으면 바로 화면 설계할 수 있고 사용자에게 미리 물어볼 수 있기에 요구사항을 수정을 빨리 수정할 수 있음

## 경계클래스 도출 : SI 클래스 도출

그 다음 외부 시스템 인터페이스 도출, 사람이 아닌 외부시스템과 상호작용하는 것을 정의

- 각 외부 시스템 액터 별로 SI 클래스를 정의

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2022.png)

- 복잡한 시스템 액터에 대해서는 기능 그룹별로 SI 클래스를 정의

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2023.png)

도서 주문 시스템은 도서주문과 도서이력의 기능하는데 일이 커지면 나눈다

## 경계 클래스 도출 : DI 클래스 도출

- 시스템과 상호작용하는 각 장치 별로 DI 클래스를 정의

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2024.png)

## 제어 클래스 도출

- 유스 케이스마다 별도의 제어 클래스를 정의

비지니스 로직은 개발자가 가장 개발을 많이 해야하는 부분이며 가장 복잡하고 많은 편

유스케이스마다 기본적으로는 하나씩 만들면 되는데 많으면 쪼개면 됨

- 복잡한 유스케이스는 보조 제어 클래스를 사용
    - 주요대안 시나리오가 복잡한 경우 각 대안 시나리오를 제어 클래스의 연산으로 하는 대신 보조 제어 클래스를 사용할 수 있음

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2025.png)

 

- 관련된 여러 유스케이스에 대하여 하나의 제어 클래스를 정의
    - 밀접한 관련이 있는 여러 유스케이스의 경우 비지니스 로직을 하나의 제어 클래스로 제공하는 것도 가능

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2026.png)

## 엔티티 클래스 도출

- 유스케이스 이벤트 흐름에 기재된 영속적인 정보와 데이터에 대해서 이를 관리하는 엔티티 클래스 정의

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2027.png)

명세서를 읽다보면 종료되고 나서도 저장되어야 하는게 보이고 그걸 묶어서 도서라는 클래스를 만든다.

- 영속적인 데이터간의 관계를 표현

# 분석 클래스 모델의 상세화

- 분석 클래스 모델의 구체화 : 속성과 연산의 완성
- 각 유스케이스 별로 실현 모델

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2028.png)

## 경계 클래스 : UI 클래스의 상세화

- 화면을 구성하는 입력과 출력 데이터 항목 : UI 클래스의 속성
- 화면에서 발생되는 사용자의 이벤트 : UI 클래스의 연산

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2029.png)

클래스를 찾으면 시퀀스 그려서 함수 채워나가고 경계클래스는 화면을 같이 그린다고 해는데 버튼은 함수로 입력하거나 출력하는 곳은 속성

- UI 항목의 입출력 유형을 속성의 스테레오 타입으로 표현

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2030.png)

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2031.png)

제약사항이나 쓰는 거면 in 이렇게 작성, 출력되는 것은 out

Inout은 출력되지만 수정되도록, 회원정보 수정처럼

숨겨져서 들어가는 것 : hidden

- 하나의 입출력 항목에 대하여 하나의 속성을 이용하여 표현

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2032.png)

### 경계클래스 : UI 클래스 속성 도출

- 유스케이스 시나리오의 각 문장을 분석하여 각 화면별로 사용자가 입력하는 데이터와 시스템이 출력하는 데이터를 속성으로 도출

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2033.png)

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2034.png)

### 경계 클래스 : UI 클래스 연산 도출

- 화면을 통하여 사용자가 발생시키는 이벤트는 연산으로 표현
- 사용자가 시스템의 기능을 시작할 때 사용되는 버튼, 메뉴 항목 등을 연산으로 표현

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2035.png)

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2036.png)

- 생성 연산은 해당 화면을 초기화하는 기능을 표현
- -기능을 유발하는 버튼, 메뉴 항목 등을 표현
- 경계클래스 연산, 함수는 명세서로 찾고 혹시 못찾으면 시퀀스로 찾으면 됨

## 결계클래스 : SI 클래스의 속성 도출

- 외부시스템과의 접속을 위한 정보
- 외부시스템으로부터의 수신을 위한 정보
- 외부 시스템 상태 정보

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2037.png)

## 경계클래스 : SI 클래스의 연산 도출

- 외부 시스템 기능 수행 요청 연산
    - SI 클래스는 개발 중인 시스템에서 외부 시스템에게 요청하는 기능을 연산으로 정의
    - 도서주문요청
    
    ![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2038.png)
    
    - 도서주문상태 조회 요청
    
    ![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2039.png)
    
- 외부 시스템 수행 처리 결과 수신 연산 <<service>>
    - SI 클래스는 외부 시스템에게 기능을 요청한 후에 이에 대한 처리 결과를 수신하는 기능을 연산으로 정의
    - 도서주문결과처리
    
    ![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2040.png)
    
- 외부 시스템 상태 감시 연산 <<periodic>>
    - SI 클래스가 담당하는 외부 시스템의 동작 상태를 감시하는 기능
    

ex)

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2041.png)

Ex) 도서주문시스템을 사용하려면 si가 필요하고 도서주문 요청 함수와 도서주문상태조회, 이 두개는 1번이고 service는 도서주문결과처리를 외부에 서비스하는 것을 말함, 도서주문 요청을 다하면 다했으니까 결과처리하라고 요청하는 함수, 서비스는 외부가 자기일이 끝났을 때 우리의 시스템보고 일해라고 하는 것을 말함, Periodic은 주기적으로 잘돌아가는지 화인

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2042.png)

## 경계클래스 : DI 클래스의 연산 도출

하드웨어와 소프트웨어가 의사소통하려면 DI가 있어야 함

- 외부장치에 대한 모니터링과 제어 기능을 표현

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2043.png)

## 경계클래스 : DI 클래스의 속성 도출

- 장치와의 인터페이스를 위하여 사용되는 데이터를 표현

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2044.png)

ex)

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2045.png)

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2046.png)

## 제어클래스의 연산 도출

- 유스케이스의 이벤트흐름 문장을 분석하여 제어 클래스의 연산을 도출
    - 시스템이 해야하는 일을 연산으로 도출
    
    ![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2047.png)
    

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2048.png)

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2049.png)

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2050.png)

## 엔티티 클래스의 속성 도출

- 엔티티 클래스를 통하여 장시간 동안 또는 영속적으로 저장될 개별적인 정보를 표현
- 개별적인 데이터의 이름, 타입, 고유키 여부, 유도 속성, 초기값 명시 가능

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2051.png)

- 많은 수의 속성을 가질 떄에는 높은 관련성이 있는 속성들을 묶어 데이터 타입 클래스를 정의하여 단순화시킬 수 있음

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2052.png)

- 엔티티 클래스들은 일반화 관계, 연관 관계 등을 통하여 엔티티 클래스가 뜻하는 정보간의 관계를 표현

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2053.png)

## 엔티티 클래스의 연산 도출

- 자신의 정보 관리 기능
    - 자신의 속성으로 표현된 정보를 관리 즉 생성/조회/수정.삭제를 제공(CRUD)
    
    ![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2054.png)
    
- 연관된 객체를 관리하는 기능
    - 연관관계를 맺고 있는 인접한 객체를 조회하거나 설정하는 연산을 제공
    
    ![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2055.png)
    
- 관련된 엔티티 클래스의 정보관리 기능
    - 관련된 다른 엔티티 클래스에 대한 관리 기능도 제공
    
    ![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2056.png)
    
- crud 기능을 생략할 수도 있음

## 유스케이스 실현 모델 작성

시퀀스 다이어그램을 그림, 분석 클래스 다이어그램과 시퀀스는 동시에 수행되면서 왔다갔다함

- 유스케이스 시나리오를 바탕으로 유스케이스 실현 모델을 작성한다.
    - 액터가 주어일때는이액터를담당하는경계클래스를정의하고액터로부터의 입력을 수신하는 연산을 정의하도록 한다.
    - 시스템이 주어일 때는 시스템의 제공하는 기능의 유형에 따라서 경계 클래스, 제어 클래스, 엔티티 클래스를 정의한다.
    - 즉 액터와의 출력 기능이면 경계 클래스를 정의하고, 비즈니스/제어 로직이면 제어 클래스를 정의한다.
    그리고 영속적인 정보를 생성/조회/수정/삭제할 필요가 있으면 엔티티 클래스를 정의한다.
- 분석클래스모델작성작업과 유스케이스실현모델작성 작업은 동시 에 수행되면서 서로 일관성을 유지하면서 서로를 보완하는 작업을 수행한다.

ex)

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2057.png)

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2058.png)

![Untitled](9-2%20Analysis%20Modeling%2018ba443431134f21bf3139f7b47b4428/Untitled%2059.png)

일관성 유지되어야 함