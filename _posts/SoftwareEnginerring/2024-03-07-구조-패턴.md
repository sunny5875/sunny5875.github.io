---
layout: post
title: 2. ë””ìì¸ íŒ¨í„´ - êµ¬ì¡° íŒ¨í„´
date: 2024-03-07 19:20:23 +0900
category: SoftwareEngineering
---
# êµ¬ì¡° íŒ¨í„´

ì¢…ë¥˜: Pattern

## 1. êµ¬ì¡° - Bridge

> ë¹Œë”íŒ¨í„´ì€ êµ¬í˜„ë¶€ì—ì„œ ì¶”ìƒì¸µì„ ë¶„ë¦¬í•´ì„œ ê°ì ë…ë¦½ì ìœ¼ë¡œ ë³€í˜•í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” íŒ¨í„´ì´ë‹¤!
> 

![Untitled](%E1%84%80%E1%85%AE%E1%84%8C%E1%85%A9%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%20cb06bf38d1584400b18c9d2df92523f5/Untitled.png)

ìœ„ì˜ ì˜ˆì‹œì²˜ëŸ¼ êµ¬ì„±í•˜ë©´ ìƒˆë¡œìš´ ëª¨ì–‘ì´ë‚˜ ìƒ‰ì´ ì¶”ê°€í•˜ë©´ ê¸°í•˜ê¸‰ìˆ˜ì ìœ¼ë¡œ ë§ì€ í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•´ì•¼í•¨!!

![Untitled](%E1%84%80%E1%85%AE%E1%84%8C%E1%85%A9%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%20cb06bf38d1584400b18c9d2df92523f5/Untitled%201.png)

ì´ëŸ° ì‹ìœ¼ë¡œ ëª¨ì–‘ê³¼ ìƒ‰ì„ ë¶„ë¦¬í•´ì¤€ë‹¤ë©´ ê° ì†ì„±ì„ ë…ë¦½ì ìœ¼ë¡œ ìˆ˜ì • ë° í™•ì¥ì´ ê°€ëŠ¥í•´ì§!

### êµ¬ì¡°

![Untitled](%E1%84%80%E1%85%AE%E1%84%8C%E1%85%A9%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%20cb06bf38d1584400b18c9d2df92523f5/Untitled%202.png)

- abstraction
    - clientê°€ ì‚¬ìš©í•˜ëŠ” ìµœìƒìœ„ íƒ€ì…
    - implementationì„ ì°¸ì¡°í•˜ê³  ì¼ì„ ìœ„ì„
- implementation
    - abstractionì˜ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì •ì˜

![Untitled](%E1%84%80%E1%85%AE%E1%84%8C%E1%85%A9%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%20cb06bf38d1584400b18c9d2df92523f5/Untitled%203.png)

## 2. êµ¬ì¡° - Decorator

> ì£¼ì–´ì§„ ìƒí™© ë° ìš©ë„ì— ë”°ë¼ ê°ì²´ì— ì±…ì„ì„ ë§ë¶™ì´ëŠ” íŒ¨í„´ìœ¼ë¡œ, ì„œë¸Œí´ë˜ì‹± ëŒ€ì‹ ì— ê¸°ëŠ¥í™•ì¥ì„ ì‰½ê²Œ í•´ì¤„ ìˆ˜ ìˆë‹¤!
> 
- ë§ˆíŠ¸ë¡œì‹œì¹´ë§ˆëƒ¥ ê³„ì† ìê¸°ìì‹ ì„ ê°ì‹¼ë‹¤ë¼ê³  ìƒê°í•˜ë©´ ë¨!

### ë¬¸ì œìƒí™©

ex) SNS ì•Œë¦¼ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë§Œë“¤ì—ˆë‹¤.

![Untitled](%E1%84%80%E1%85%AE%E1%84%8C%E1%85%A9%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%20cb06bf38d1584400b18c9d2df92523f5/Untitled%204.png)

- ìƒì†ìœ¼ë¡œ í•´ê²°í–ˆì§€ë§Œ ì‚¬ëŒë“¤ì€ SMS, Facebookë¥¼ ê°™ì´ ì•Œë¦¼ì„ ë°›ê³  ì‹¶ë‹¤ëŠ” í”¼ë“œë°±ì´ ì™”ë‹¤!

â†’ ì´ê±¸ ë˜ ìƒì†ìœ¼ë¡œ í•œë‹¤ë©´â€¦ ê³„ì†í•´ì„œ ì„œë¸Œí´ë˜ì‹±ì´ ë¬´í•œëŒ€ë¡œ ë°œì‚°í•´ë²„ë¦°ë‹¤ ã… ã… 

![Untitled](%E1%84%80%E1%85%AE%E1%84%8C%E1%85%A9%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%20cb06bf38d1584400b18c9d2df92523f5/Untitled%205.png)

â‡’ ê·¸ë ‡ë‹¤ë©´ ìƒì†ì´ ì•„ë‹Œ ì§‘í•©ì„ ì“°ëŠ” ê±´ ì–´ë–¨ê¹Œ??

![Untitled](%E1%84%80%E1%85%AE%E1%84%8C%E1%85%A9%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%20cb06bf38d1584400b18c9d2df92523f5/Untitled%206.png)

```swift
class Uploader {
    private func setUp() {
        /*...*/
  }

  func upload() {
    setUp()
  }
}

class DecoratedUploader: Uploader {
  var uploader: Uploader? // ë°ì½”ë ˆì´í„°ê°€ ë‚´ë¶€ uploaderë¥¼ ê°€ì§€ê¸°ì— ë©í•‘í•˜ê²Œ ë¨!!

    init(_ uploader: Uploader? = nil) {
    self.uploader = uploader
  }

  override func upload() {
    super.upload()
    uploader?.upload()
  }
}

class TextUploader: DecoratedUploader {
    override func upload() {
        super.upload()
        print("uploading text")
    }
}

class ImageUploader: DecoratedUploader {
    override func upload() {
        super.upload()
        print("uploading image")
    }
}

class VideoUploader: DecoratedUploader {
    override func upload() {
        super.upload()
        print("uploading video")
    }
}

class FileUploader: DecoratedUploader {
    override func upload() {
        super.upload()
        print("uploading file")
    }
}

let textAndImageAndVideoUploader = TextUploader(ImageUploader(VideoUploader()))
let imageAndVideoUploader = ImageUploader(VideoUploader())
let everythingUplodaer = TextUploader(ImageUploader(VideoUploader(FileUploader())))
```

<aside>
ğŸ’¡ í•˜ì§€ë§Œ Swiftì—ì„œëŠ” POPê°€ ìˆê¸°ì— ìˆ˜í‰í™•ì¥ì´ ê°€ëŠ¥í•´ì„œ ê·¸ëƒ¥ protocolì„ ì—¬ëŸ¬ê°œ ë§Œì¡±í•˜ë„ë¡ í•˜ë©´ ëœë‹¤! ë”°ë¼ì„œ classë¡œ ê´€ë¦¬í•´ì•¼í•  ë•Œë§Œ ì‚¬ìš©í•˜ë©´ ë  ë“¯ğŸ™‚

</aside>

## 3. êµ¬ì¡° - Facade

> í¼ì‚¬ë“œëŠ” ê±´ë¬¼ì˜ ì •ë©´, ì™¸ê´€ì„ ì˜ë¯¸í•¨.
ì¦‰, ì–´ë–¤ ì†Œí”„íŠ¸ì›¨ì–´ì˜ ì»¤ë‹¤ë€ ì½”ë“œì— ëŒ€í•œ ê°„ëµí™”ëœ ì¸í„°í˜ì´ìŠ¤ë¼ê³  ë³´ë©´ ë¨!
> 
- í¼ì„œë“œëŠ” ì—¬ëŸ¬ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì†Œìœ í•˜ì—¬ ì‚¬ìš©í•´ì•¼í•˜ëŠ” íƒ€ì…ì´ ìˆëŠ” ê²½ìš°, ê°„ë‹¨í•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ê° ì¸ìŠ¤í„´ìŠ¤ë“¤ì´ ì¼í•˜ê²Œ í•  ë•Œ ìœ ìš©!

```swift
protocol Facade {
    func work()
}

struct CPU {
    func work(with memory: Memory) { }
}

struct Memory {
    func input(from Devices: [Device]) { }
    func output(to Devices: [Device]) { }
}

class Device { ... }
class InputDevice: Device { ... }
class OutputDevice: Device { ... }
class Keyboard: InputDevice { ... }
class Monitor: OutputDevice { ... }
class TouchBar: Device { ... }

struct Computer: Facade {
    private let cpu = CPU()
    private let memory = Memory()
    private let keyboard = Keyboard()
    private let monitor = Monitor()
    private let touchBar = TouchBar()

    func work() {
        memory.input(from: [keyboard, touchBar])
        cpu.work(with: memory)
        memory.output(to: [monitor, touchBar])
    }
}

// My code
let computer = Computer()
computer.work()
```

## 4. êµ¬ì¡° - Flyweight

> ë™ì¼í•˜ê±°ë‚˜ ìœ ì‚¬í•œ ê°ì²´ ì‚¬ì´ì—ì„œ ê°€ëŠ¥í•œ ë§ì€ ë°ì´í„°ë¥¼ ê³µìœ í•˜ê²Œ í•´ì„œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ ìµœì†Œí™”í•˜ëŠ” íŒ¨í„´!
> 

![Untitled](%E1%84%80%E1%85%AE%E1%84%8C%E1%85%A9%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%20cb06bf38d1584400b18c9d2df92523f5/Untitled%207.png)

- flyweight: ê³µìœ ë˜ëŠ” ë°ì´í„°ì— ëŒ€í•œ ì¸í„°í˜ì´ìŠ¤
- flyweightFactory: flyweigfhtê°ì²´ë“¤ì„ ê°€ì§€ë©° ê´€ë¦¬

ex) ëª¬ìŠ¤í„°ë“¤ì´ ëŒ€ëŸ‰ìœ¼ë¡œ ì´ë™í•˜ë©´ì„œ ì‚¬ë¼ì§€ê³  ë‹¤ì‹œ ìƒì„±ë˜ëŠ” ê²½ìš°

```jsx
import Foundation
import CoreGraphics

// flyweight
protocol Monster {
    func createAtCurrentLocation(at location: CGPoint)
    func deleteAtCurrentLocation(at location: CGPoint)
    func recreateAtOtherLocation(at location: CGPoint)
    func attack()
}

// flyweight êµ¬í˜„ì²´
class LowerLevelMonster: Monster {
    func createAtCurrentLocation(at: CGPoint) {
        // some code
    }

    func deleteAtCurrentLocation(at: CGPoint) {
        // some code
    }

    func recreateAtOtherLocation(at: CGPoint) {
        // some code
    }

    func attack() {
        // some code
    }
}

```

```jsx
class MonsterClient {
    let monster: Monster
    var currentLocation: CGPoint
    init(monster: Monster, currentLocation: CGPoint) {
        self.monster = monster
        self.currentLocation = currentLocation
    }

    func createMonster(currentLocation: CGPoint) {
        monster.createAtCurrentLocation(at: currentLocation)
    }

    func recreateMonster(currentLocation: CGPoint, at location: CGPoint) {
        monster.deleteAtCurrentLocation(at: currentLocation)
        monster.recreateAtOtherLocation(at: location)
    }
}

// MARK: Factory: flyweightë“¤ì„ ê´€ë¦¬í•˜ëŠ” ê°ì²´
class MonsterFactory {
    static let shared = MonsterFactory()
    private init() { }

    enum MonsterLevel {
        case lower
    }

    private var createdMonster = [MonsterLevel: Monster]()

    private func createMonster(_ level: MonsterLevel) -> Monster {
        switch level {
        case .lower:
            let lowerLevelMonster = LowerLevelMonster()
            createdMonster[level] = lowerLevelMonster

            return lowerLevelMonster
        }
    }

    func monster(level: MonsterLevel) -> Monster {
        if let monster = createdMonster[level] {
            return monster
        } else {
            let monster = createMonster(level)
            return monster
        }
    }
}

let lowerLevelMonster = MonsterFactory.shared.monster(level: .lower)
let lowerLevelMonsterClient = MonsterClient(monster: lowerLevelMonster, currentLocation: CGPoint(x: 10, y: 20))

lowerLevelMonsterClient.createMonster(currentLocation: CGPoint(x: 10, y: 20))
lowerLevelMonsterClient.recreateMonster(currentLocation: CGPoint(x: 10, y: 20), at: CGPoint(x: 100, y: 110))

```

- ëª¬ìŠ¤í„°ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ì ¸ì˜¬ ë•Œ ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ì ¸ì˜¤ëŠ”ê²Œ ì•„ë‹ˆë¼ ë”•ì…”ë„ˆë¦¬ì— ìˆëŠ” ê°’ì„ ìºì‹œí•´ì„œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆê²Œ ë¨!

## 5. êµ¬ì¡° - Proxy

> í”„ë¡ì‹œ ëŒ€ë¦¬ë¼ëŠ” ëœ»ìœ¼ë¡œ ë‹¤ë¥¸ ëˆ„êµ°ê°€ë¥¼ ëŒ€ì‹ í•´ì„œ ê·¸ ì—­í• ì„ ìˆ˜í–‰í•˜ëŠ” ì¡´ì¬
ìì‹ ì´ í•  ìˆ˜ ìˆëŠ” ìµœì„ ì˜ ì¼ì„ í•œ í›„ì— ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ë©´ ì§„ì§œ ì¼ì„ í•˜ëŠ” ì‚¬ëŒì—ê²Œ ìš”ì²­í•˜ëŠ” íŒ¨í„´
> 

### í”„ë¡ì‹œì˜ ì¢…ë¥˜

- remote proxy
    - ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³  ì„œë¹„ìŠ¤ ê°ì²´ì— ì´ë¥¼ ì „ë‹¬í•˜ëŠ” ì—­í•  ë‹´ë‹¹
- virtual proxy
    - ì„œë¹„ìŠ¤ ê°ì²´ì— ëŒ€í•œ ì •ë³´ë¥¼ ìºì‹±í•˜ì—¬ ì ‘ê·¼ì„ ì—°ê¸°
- protection proxy
    - íŠ¹ì • ì‘ì—…ì„ ìš”ì²­í•œ ê°ì²´ê°€ í•´ë‹¹ ì‘ì—…ì„ ìˆ˜í–‰í•  ê¶Œí•œì„ ê°€ì§€ê³  ìˆëŠ”ì§€ í™•ì¸

### êµ¬ì¡°

![Untitled](%E1%84%80%E1%85%AE%E1%84%8C%E1%85%A9%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%20cb06bf38d1584400b18c9d2df92523f5/Untitled%208.png)

- Proxy: ëŒ€ë¦¬ ì—­í• 
- RealSubject: ì‹¤ì œì˜ ì£¼ì²´
- Subject: ëŒ€ë¦¬ì™€ ì‹¤ì œ ì—­í• ì„ ë™ì¼ì‹œí•˜ê¸° ìœ„í•œ í”„ë¡œí† ì½œ

```jsx

// subject
protocol YouTubeDownloadSubject {
   func downloadYoutubeVideos() async -> [String]
}

final class RealSubject: YouTubeDownloadSubject {
    func downloadYoutubeVideos() async -> [String] {
        //Todo: ìœ íŠœë¸Œ ì„œë²„ì—ì„œ ë¹„ë””ì˜¤ë¥¼ ë‹¤ìš´ë¡œë“œí•´ì˜¤ëŠ” ë¶€ë¶„ì„ êµ¬í˜„í•œë‹¤.
    }
}

final class Proxy: YouTubeDownloadSubject {
        //ì§„ì§œ ìš”ì²­ì„ ë°›ì•„ì„œ ì²˜ë¦¬í•˜ëŠ” ê°œì²´, ì •ë§ë¡œ ì‚¬ìš©í• ë•Œë§Œ ì´ˆê¸°í™”í•˜ê¸° ìœ„í•˜ì—¬ lazyí‚¤ì›Œë“œ ì‚¬ìš©
    private lazy var realSubject = RealSubject()
        //ìºì‹±êµ¬í˜„
    private var videoCache = [String]()
        //í´ë¼ì´ì–¸íŠ¸ ê¶Œí•œ ë°›ìŒ
    private var client: Clinet

    init(_ client: Clinet) {
        self.client = client
    }

    func downloadYoutubeVideos() async -> [String] {
        //í´ë¼ì´ì–¸íŠ¸ ê¶Œí•œì— ë”°ë¼ ì œì–´ë¥¼ í•  ìˆ˜ë„ ìˆë‹¤.
        guard client.auth == .owner else {
            print("ìœ íŠœë¸Œ ë¹„ë””ì˜¤ë¥¼ ë‹¤ìš´ë¡œë“œí•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.")
            return []
        }

        //ë¹„ë””ì˜¤ ìºì‹œê°€ ë¹„ì–´ìˆìœ¼ë©´ ì‹¤ì œ realSubjectì— ë°ì´í„°ë¥¼ ìš”ì²­í•¨.
        if videoCache.isEmpty {
            videoCache = await realSubject.downloadYoutubeVideos()
            return videoCache
        } else {
            //ë¹„ë””ì˜¤ ìºì‹œì— ë°ì´í„° ìˆìœ¼ë©´ ê·¸ê±° ë¦¬í„´í•´ì¤Œ.
            return videoCache
        }
    }
}

let client = Clinet(.owner)
let proxy = Proxy(client)

//í”„ë¡œí† ì½œ íƒ€ì…ì„ ë°›ìŠµë‹ˆë‹¤.
func loadYouTubeVideo(_ service: YouTubeDownloadSubject) {
    service.downloadYoutubeVideos()
}

loadYouTubeVideo(proxy)

```

### ì¥ì 

- realsubjectê°€ ì•„ì£¼ í° ì¸ìŠ¤í„´ìŠ¤ì¼ ë•Œ proxyë¥¼ ì´ìš©í•´ì„œ ìµœëŒ€í•œ ì§€ì—°ì‹œí‚¬ ìˆ˜ ìˆìŒ
- proxyëŠ” realì´ ì¤€ë¹„ë˜ì§€ ì•Šê±°ë‚˜ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë„ ë™ì‘

### ë‹¨ì 

- proxyë¥¼ ë„ì…í•´ì•¼í•˜ë¯€ë¡œ ì½”ë“œê°€ ë³µì¡í•´ì§

## 6. êµ¬ì¡° - Composite

> ê°ì²´ë“¤ì„ íŠ¸ë¦¬ êµ¬ì¡°ë¡œ êµ¬ì„±í•˜ì—¬ ë¶€ë¶„, ì „ì²´ ê³„ì¸µì„ í‘œí˜„í•˜ëŠ” íŒ¨í„´
ì‚¬ìš©ìê°€ ë‹¨ì¼ ê°ì²´ì™€ ë³µí•© ê°ì²´ ëª¨ë‘ ë™ì¼í•˜ê²Œ ë‹¤ë£¨ë„ë¡ í•œë‹¤
> 

ì¬ê·€ì ìœ¼ë¡œ ìµœí•˜ë‹¨ê¹Œì§€ ì‹¤í–‰í•˜ê³  ì‹¶ì„ ê²½ìš° ìœ ìš©í•˜ê²Œ ì‚¬ìš© ê°€ëŠ¥

![Untitled](%E1%84%80%E1%85%AE%E1%84%8C%E1%85%A9%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%20cb06bf38d1584400b18c9d2df92523f5/Untitled%209.png)

- component: ê³µí†µì ì¸ ê¸°ëŠ¥ì„ í•˜ëŠ” í”„ë¡œí† ì½œ
- leaf, composite: ëª¨ë‘ componentë¥¼ êµ¬í˜„í•˜ì§€ë§Œ, compoisteëŠ” ìì‹ componentë“¤ì„ ì¶”ê°€ì ìœ¼ë¡œ ê°€ì§€ê³  ìˆìŒ

```jsx
import Foundation

// Component
protocol Military {
    var unitName: String { get set }
    func attack()
}

// Leafs
struct AirForce: Military {
    var unitName: String
    func attack() {
        print("\\(unitName) ê³µê²© ğŸ”«")
    }
}

struct Navy: Military {
    var unitName: String
    func attack() {
        print("\\(unitName) ê³µê²© ğŸ”«")
    }
}

struct Army: Military {
    var unitName: String
    func attack() {
        print("\\(unitName) ê³µê²© ğŸ”«")
    }
}

// Composite
struct MilitaryGroup: Military {
    var unitName: String
    var group: [Military]

    func attack() {
        print("-----\\(unitName) ì˜ˆí•˜ì— ìˆëŠ” ë¶€ëŒ€ì— ê³µê²© ëª…ë ¹ì„ í•˜ë‹¬í•œë‹¤.-----")
        group.forEach { unit in
            unit.attack()
        }
    }
}

let navy627 = Navy(unitName: "í•´êµ° 627ëŒ€ëŒ€")
let navy625 = Navy(unitName: "í•´êµ° 625ëŒ€ëŒ€")
let army653 = Army(unitName: "ìœ¡êµ° 653ëŒ€ëŒ€")
let army669 = Army(unitName: "ìœ¡êµ° 669ëŒ€ëŒ€")
let airForce257 = AirForce(unitName: "ê³µêµ° 257ëŒ€ëŒ€")
let airForce239 = AirForce(unitName: "ê³µêµ° 239ëŒ€ëŒ€")

let navy1 = MilitaryGroup(unitName: "í•´êµ° 1ì‚¬ë‹¨", group: [navy627, navy625])
let army1 = MilitaryGroup(unitName: "ìœ¡êµ° 1ì‚¬ë‹¨", group: [army653, army669])
let airForce1 = MilitaryGroup(unitName: "ê³µêµ° 1ì‚¬ë‹¨", group: [airForce257, airForce239])

let thirdROKArmy = MilitaryGroup(unitName: "3êµ° ì‚¬ë ¹ë¶€", group: [navy1, army1, airForce1])

thirdROKArmy.attack()
```

## 7. êµ¬ì¡° - Adapter

> í´ë˜ìŠ¤ì˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©ìê°€ ì›í•˜ëŠ” ë‹¤ë¥¸ ì¸í„°í˜ì´ìŠ¤ë¡œ ë³€í™˜í•˜ëŠ” íŒ¨í„´
> 

### êµ¬ì¡°

![Untitled](%E1%84%80%E1%85%AE%E1%84%8C%E1%85%A9%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%20cb06bf38d1584400b18c9d2df92523f5/Untitled%2010.png)

- client: ê¸°ì¡´ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ í¬í•¨í•˜ëŠ” í´ë˜ìŠ¤
- target interface: ë‹¤ë¥¸ í´ë˜ìŠ¤
- adapter: adapteeë¥¼ wrappingí•´ì„œ êµ¬í˜„
- adaptee: í˜¸í™˜ë˜ì§€ ì•Šì€ í´ë˜ìŠ¤

![Untitled](%E1%84%80%E1%85%AE%E1%84%8C%E1%85%A9%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%20cb06bf38d1584400b18c9d2df92523f5/Untitled%2011.png)

![Untitled](%E1%84%80%E1%85%AE%E1%84%8C%E1%85%A9%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%20cb06bf38d1584400b18c9d2df92523f5/Untitled%2012.png)

```swift
**// MARK: - import ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì¸í„°í˜ì´ìŠ¤ (Adaptee)**
class AppleAuthorization {
    func presentAuth() {
        // ì• í”Œ ë¡œê·¸ì¸ ë‚´ë¶€êµ¬í˜„
    }
}

class GoogleAuthorization {
    func tryLogin() {
        // êµ¬ê¸€ ë¡œê·¸ì¸ ë‚´ë¶€êµ¬í˜„
    }
}

**// Mark: - Target Interface**
protocol AuthorizationService {
    func login(completion: (Bool) -> ())
}

// MARK: - Adapter
class Authorization: AuthorizationService {
    func submitUserInfo(_ userInfo: Token, completion: (Bool) -> ()) {
        // ì‚¬ìš©ì ì •ë³´ë¥¼ ì„œë²„ë¡œ ìš”ì²­í•˜ëŠ” ë™ì‘
    }

    func login(completion: (Bool) -> ()) {
        // ë¡œê·¸ì¸ ë™ì‘
        let exampleInfo = Token(id: "ì‚¬ìš©ì ì•„ì´ë””", password: "ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸")
        submitUserInfo(exampleInfo) { result in
            completion(result)
        }
    }
}

struct AppleAuthorizationAdapter: AuthorizationService {
    let adaptee = AppleAuthorization()

    func login(completion: (Bool) -> ()) {
        adaptee.presentAuth()
    }
}

struct GoogleAuthorizationAdapter: AuthorizationService {
    let adaptee = GoogleAuthorization()

    func login(completion: (Bool) -> ()) {
        adaptee.tryLogin()
    }
}

// Client
enum AuthorizationPlatform {
    case basic
    case apple
    case google
}

func presentAuthorization(_ platform: AuthorizationPlatform, completion: (Bool) -> ()) {
    switch platform {
    case .basic:
        let basicAuth = Authorization()
        basicAuth.login { result in
            // ë¡œê·¸ì¸ ì„±ê³µ/ì‹¤íŒ¨
        }
    case .apple:
        let appleAuth = AppleAuthorizationAdapter()
        appleAuth.login { result in
            // ë¡œê·¸ì¸ ì„±ê³µ/ì‹¤íŒ¨
        }
    case .google:
        let googleAuth = GoogleAuthorizationAdapter()
        googleAuth.login { result in
            // ë¡œê·¸ì¸ ì„±ê³µ/ì‹¤íŒ¨
        }
    }
}
```
