# í–‰ë™ íŒ¨í„´

ì¢…ë¥˜: Pattern

## 1. Interpreter

> ë²ˆì—­ê¸°ì²˜ëŸ¼ ì…ë ¥ê°’ì„ ë°›ì•„ì„œ ì•½ì†ëœ ê°’ì„ ëŒë ¤ì£¼ëŠ” ê²ƒ
> 

### ì‚¬ìš©ë˜ëŠ” ê²½ìš°

- ê°„ë‹¨í•œ ë¬¸ë²• í•´ì„ì— ì í•©í•©ë‹ˆë‹¤.
- SQLê³¼ ê°™ì€ ê³„ì¸µì  ì–¸ì–´ë¥¼ í•´ì„í•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤.
- í†µì‹  Protocolì„ ì„¤ëª…í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ì–¸ì–´ë“¤ì˜ í•´ì„ì—ë„ ì‚¬ìš©ë©ë‹ˆë‹¤.

### êµ¬ì¡°

![Untitled](%E1%84%92%E1%85%A2%E1%86%BC%E1%84%83%E1%85%A9%E1%86%BC%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%208e0831f9cb654f35b3b1266d1ea7b9a0/Untitled.png)

- context: í•´ì„ì´ í•„ìš”í•œ ë¬¸ì¥
- abstractExpression: protocol
- terminalExpression: í•´ì„í•˜ëŠ” ë…ë¦½ì ì¸ ì½”ë“œ
- nonTerminalExpression: í•˜ë‚˜ ì´ìƒì˜ terminalExpresionì„ ì°¸ì¡°í•˜ì—¬ í•´ì„í•˜ëŠ” ì½”ë“œ

```swift
protocol AbstractExpression {
    func interpret(_ context: Context)
}

final class Context {
    enum Gender {
        case male
        case female
    }

    private var persons: [String: Gender] = [:]

    func getPersons() -> [String: Gender] {
        self.persons
    }

    func lookup(name: String) -> Gender {
        return self.persons[name]!
    }

    func assign(expression: TerminalExpression, gender: Gender) {
        self.persons[expression.name] = gender
    }
}

final class TerminalExpression: AbstractExpression {
    let name: String

    init(name: String) {
        self.name = name
    }

    func interpret(_ context: Context) {
        print(context.lookup(name: self.name))
    }
}

final class NonterminalExpression: AbstractExpression {
    private var maleCount: Int = 0
    private var femaleCount: Int = 0

    func interpret(_ context: Context) {
        for person in context.getPersons() {
            if person.value == .male {
                maleCount += 1
            } else if person.value == .female {
                femaleCount += 1
            }
        }
        print("ë‚¨ìëŠ” \(maleCount)ëª…, ì—¬ìëŠ” \(femaleCount)ëª…ì…ë‹ˆë‹¤")
    }
}

let context = Context()
let a = TerminalExpression(name: "ê¹€ì—°ê²½")
let b = TerminalExpression(name: "ì†í¥ë¯¼")
let c = TerminalExpression(name: "ë¥˜í˜„ì§„")
context.assign(expression: a, gender: .female)
context.assign(expression: b, gender: .male)
context.assign(expression: c, gender: .male)
let expression = NonterminalExpression()
expression.interpret(context)
a.interpret(context) // female
```

## 2. Template

> ë™ì‘ ìƒì˜ ì•Œê³ ë¦¬ì¦˜ì˜ í”„ë¡œê·¸ë¨ ë¼ˆëŒ€ë¥¼ ì •ì˜í•œë‹¤.
ë”°ë¼ì„œ ì•Œê³ ë¦¬ì¦˜ì˜ êµ¬ì¡°ë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³  ì•Œê³ ë¦¬ì¦˜ì˜ íŠ¹ì • ë‹¨ê³„ë“¤ì„ ë‹¤ì‹œ ì •ì˜í•  ìˆ˜ ìˆê²Œ í•´ì¤Œ
> 

![Untitled](%E1%84%92%E1%85%A2%E1%86%BC%E1%84%83%E1%85%A9%E1%86%BC%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%208e0831f9cb654f35b3b1266d1ea7b9a0/Untitled%201.png)

### êµ¬ì¡°

![Untitled](%E1%84%92%E1%85%A2%E1%86%BC%E1%84%83%E1%85%A9%E1%86%BC%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%208e0831f9cb654f35b3b1266d1ea7b9a0/Untitled%202.png)

```swift
class SteakMaker {
    final func makeSteak() {
        grill()
        pourSauce()
        plating()
        print("----------")
    }

    func grill() {
        print("ê³ ê¸°ë¥¼ êµ½ìŠµë‹ˆë‹¤.")
    }

    func pourSauce() {
        print("ì†ŒìŠ¤ë¥¼ ë¶“ìŠµë‹ˆë‹¤.")
    }

    func plating() {
        print("í”Œë ˆì´íŒ…ì„ í•©ë‹ˆë‹¤.")
    }
}

class ChefYagom: SteakMaker {
    override func grill() {
        print("ê³ ê¸°ë¥¼ ê²‰ì—ë§Œ ì•„ì£¼ ì‚´ì§ ìµí™ë‹ˆë‹¤.")
    }

    override func plating() {
        print("í”Œë ˆì´íŒ… í›„ íŒŒìŠ¬ë¦¬ ê°€ë£¨ë¥¼ ë§ˆì§€ë§‰ìœ¼ë¡œ ë¿Œë ¤ì¤ë‹ˆë‹¤.")
    }
}

let steakMaker = SteakMaker()
let odong = ChefOdong()
let yagom = ChefYagom()

steakMaker.makeSteak()
odong.makeSteak()
yagom.makeSteak()
/*
ê³ ê¸°ë¥¼ êµ½ìŠµë‹ˆë‹¤.
ì†ŒìŠ¤ë¥¼ ë¶“ìŠµë‹ˆë‹¤.
í”Œë ˆì´íŒ…ì„ í•©ë‹ˆë‹¤.
----------
ê³ ê¸°ë¥¼ êµ½ìŠµë‹ˆë‹¤.
ì†ŒìŠ¤ë¥¼ ì ‘ì‹œ í•œ ì¼ ì— ë¶“ìŠµë‹ˆë‹¤.
í”Œë ˆì´íŒ…ì„ í•©ë‹ˆë‹¤.
----------
ê³ ê¸°ë¥¼ ê²‰ì—ë§Œ ì•„ì£¼ ì‚´ì§ ìµí™ë‹ˆë‹¤.
ì†ŒìŠ¤ë¥¼ ë¶“ìŠµë‹ˆë‹¤.
í”Œë ˆì´íŒ… í›„ íŒŒìŠ¬ë¦¬ ê°€ë£¨ë¥¼ ë§ˆì§€ë§‰ìœ¼ë¡œ ë¿Œë ¤ì¤ë‹ˆë‹¤.
----------
*/

```

## 3. Chain of Responsibility

> requestë¥¼ ì²˜ë¦¬í•˜ëŠ” ê°ì²´ë“¤ì´ ì—°ê²°ë˜ì–´ìˆê³  ìê¸°ê°€ ë‹´ë‹¹í•˜ëŠ” ê±°ë©´ ì²˜ë¦¬í•˜ê³  ì•„ë‹ˆë©´ ë„˜ê²¨ì¤€ë‹¤
> 

![Untitled](%E1%84%92%E1%85%A2%E1%86%BC%E1%84%83%E1%85%A9%E1%86%BC%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%208e0831f9cb654f35b3b1266d1ea7b9a0/Untitled%203.png)

![Untitled](%E1%84%92%E1%85%A2%E1%86%BC%E1%84%83%E1%85%A9%E1%86%BC%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%208e0831f9cb654f35b3b1266d1ea7b9a0/Untitled%204.png)

### êµ¬ì¡°

![Untitled](%E1%84%92%E1%85%A2%E1%86%BC%E1%84%83%E1%85%A9%E1%86%BC%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%208e0831f9cb654f35b3b1266d1ea7b9a0/Untitled%205.png)

- handler
    - ì¸í„°í˜ì´ìŠ¤ë¡œ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ë‹¨ì¼ ë©”ì„œë“œ í¬í•¨
- baseHandler
    - ëª¨ë“  í•¸ë“¤ëŸ¬ê°€ ê³µí†µì ìœ¼ë¡œ ê°€ì ¸ì•¼í•˜ëŠ” ë³´ì¼ëŸ¬ í”Œë ˆì´íŠ¸ ì½”ë“œë¥¼ êµ¬í˜„í•˜ëŠ” ì½”ë“œ
    - protocol extensionìœ¼ë¡œ ëŒ€ì²´ ê°€ëŠ¥!
- concreteHandler
    - ì‹¤ì œë¡œ ì²˜ë¦¬í•˜ëŠ” í•¸ë“¤ëŸ¬
- client
    - ì‹¤ì œ í•¸ë“¤ëŸ¬ë“¤ì„ ê°€ì§€ê³  ìˆœì„œë¥¼ ì—°ê²°

```swift
// Handler
protocol Handler: AnyObject {
    var nextHandler: Handler? { get set }
    func setNext(handler: Handler)
    func handle(request: String) -> String?
}

// base handler
extension Handler {
    func setNext(handler: Handler) {
        if self.nextHandler == nil {
            self.nextHandler = handler
        } else {
            self.nextHandler?.setNext(handler: handler)
        }
    }

    func handle(request: String) -> String? {
        return nextHandler?.handle(request: request)
    }
}

// Concrete Handler
class TomatoHandler: Handler {
    var nextHandler: Handler?

    func handle(request: String) -> String? {
        print("í† ë§ˆí†  ê¸°ê³„ ì „ë‹¬ ì™„ë£Œ")
        if request == "í† ë§ˆí† " {
            return "í† ë§ˆí†  ìŠ¬ë¼ì´ìŠ¤ ì™„ì„±!"
        } else {
            if let response = nextHandler?.handle(request: request) {
                return response
            } else {
                return "ìš”ì²­ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."
            }
        }
    }
}

class OnionHandler: Handler {
    var nextHandler: Handler?

    func handle(request: String) -> String? {
        print("ì–‘íŒŒ ê¸°ê³„ ì „ë‹¬ ì™„ë£Œ")
        if request == "ì–‘íŒŒ" {
            return "ì–‘íŒŒ ìŠ¬ë¼ì´ìŠ¤ ì™„ì„±!"
        } else {
            if let response = nextHandler?.handle(request: request) {
                return response
            } else {
                return "ìš”ì²­ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."
            }
        }
    }
}

class LettuceHandler: Handler {
    var nextHandler: Handler?

    func handle(request: String) -> String? {
        print("ì–‘ìƒì¶” ê¸°ê³„ ì „ë‹¬ ì™„ë£Œ")
        if request == "ì–‘ìƒì¶”" {
            return "ì–‘ìƒì¶” ì†ì§ˆ ì™„ì„±!"
        } else {
            if let response = nextHandler?.handle(request: request) {
                return response
            } else {
                return "ìš”ì²­ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."
            }
        }
    }
}

class PickleHandler: Handler {
    var nextHandler: Handler?

    func handle(request: String) -> String? {
        print("í”¼í´ ê¸°ê³„ ì „ë‹¬ ì™„ë£Œ")
        if request == "í”¼í´" {
            return "í”¼í´ ìŠ¬ë¼ì´ìŠ¤ ì™„ì„±!"
        } else {
            if let response = nextHandler?.handle(request: request) {
                return response
            } else {
                return "ìš”ì²­ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."
            }
        }
    }
}

// Client
class Client {
    private var firstHandler: Handler?

    func request(request: String) -> String {
        return self.firstHandler?.handle(request: request) ?? "firstHandlerë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”"
    }

    func addHandler(handler: Handler) {
        if let firstHandler = firstHandler {
            firstHandler.setNext(handler: handler)
        } else {
            self.firstHandler = handler
        }
    }
}

// ì‚¬ìš©í•´ë³´ê¸°
let client = Client()

let tomatoMachine = TomatoHandler()
let onionMachine = OnionHandler()
let lettuceMachine = LettuceHandler()
let pickleMachine = PickleHandler()

client.addHandler(handler: tomatoMachine)
client.addHandler(handler: onionMachine)
client.addHandler(handler: lettuceMachine)
client.addHandler(handler: pickleMachine)

print(client.request(request: "ì–‘ìƒì¶”"))

/*
í† ë§ˆí†  ê¸°ê³„ ì „ë‹¬ ì™„ë£Œ
ì–‘íŒŒ ê¸°ê³„ ì „ë‹¬ ì™„ë£Œ
ì–‘ìƒì¶” ê¸°ê³„ ì „ë‹¬ ì™„ë£Œ
ì–‘ìƒì¶” ì†ì§ˆ ì™„ì„±!
*/
```

## 4. Command

> ìš”ì²­ì„ ê°ì²´ì˜ í˜•íƒœë¡œ ìº¡ìŠí™”í•´ì„œ ì‚¬ìš©ìê°€ ë³´ë‚¸ ìš”ì²­ì„ ë‚˜ì¤‘ì— ì´ìš©í•   ìˆ˜ ìˆë„ë¡ ì €ì¥/ë¡œê¹…/ì·¨ì†Œí•˜ëŠ” íŒ¨í„´
> 

ex) ì¹´í˜ì˜ ì£¼ë¬¸ì„œê°€ ë°”ë¡œ command, ì£¼ë¬¸ì„ ë°›ëŠ” ì‚¬ëŒì€ ì»¤í”¼ ë§Œë“œëŠ” ê³¼ì •ì€ ì•Œ í•„ìš” ì—†ì´ ì „ë‹¬ë§Œ í•´ì£¼ë©´ ë¨!

### êµ¬ì¡°

![Untitled](%E1%84%92%E1%85%A2%E1%86%BC%E1%84%83%E1%85%A9%E1%86%BC%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%208e0831f9cb654f35b3b1266d1ea7b9a0/Untitled%206.png)

- Invoker: ëª…ë ¹ì„ ë°›ì•„ì„œ ìš”ì²­ì„ ì‹œì‘í•˜ëŠ” ê°ì²´
- Receiver: ìˆ˜ì‹ ì, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ê°€ì§€ê³  ìˆê³  ì‹¤ì œë¡œ ìˆ˜í–‰í•˜ëŠ” ê°ì²´
- command: ëª…ë ¹ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•œ ì¸í„°í˜ì´ìŠ¤
- concrete command: ì¸í„°í˜ì´ìŠ¤ë¥¼ ì±„íƒí•´ì„œ ì‹¤ì œë¡œ ì‹¤í–‰ë˜ëŠ” ê°œì²´, receiverë¥¼ ê°€ì§€ê³  ìˆê³  ì‹¤ì œë¡œ ì‹¤í–‰ë˜ëŠ” í–‰ìœ„ë¥¼ ìœ„ì„

**ë¬¸ì œì **

```swift
// receiver
struct TV { 
    func turnOn() {
        print("TVê°€ ì¼œì¡ŒìŠµë‹ˆë‹¤")
    }
}

// invoker
struct HomeApp {
    private let tv: TV // invokerê°€ receiverë¥¼ ê°€ì§€ê³  ìˆì–´ ì„œë¡œ ì˜ì¡´í•˜ê³  ìˆë‹¤!!!

    init(tv: TV) {
        self.tv = tv
    }

    func pressButton() { 
        tv.turnOn()
    }
}

func turnOnTV() {
    let tv = TV()
    let homeApp = HomeApp(tv: tv)
    homeApp.touch()
}

turnOnTV() // TVê°€ ì¼œì¡ŒìŠµë‹ˆë‹¤
```

```swift
// Command
protocol Command {
    func execute()
}

// Concrete Command
struct turnOnTVCommand: Command {
    private var tv: TV // Receiver

    init(tv: TV) {
        self.tv = tv
    }

    func execute() {
        tv.turnOn() // Receiverì˜ ë©”ì„œë“œ í˜¸ì¶œ
    }
}

struct changeChannelCommand: Command {
    private var tv: TV // Receiver
    private var channel: String

    init(tv: TV, channel: String) {
        self.tv = tv
        self.channel = channel
    }

    func execute() {
        tv.change(channel) // Receiverì˜ ë©”ì„œë“œ í˜¸ì¶œ
    }
}

// Receiver
struct TV {
    func turnOn() {
        print("TVê°€ ì¼œì¡ŒìŠµë‹ˆë‹¤.")
    }

    func change(_ channel: String) {
        print("TVê°€ \\(channel)ë²ˆ ì±„ë„ì„ í‹€ì—ˆìŠµë‹ˆë‹¤.")
    }
}

// Invoker
final class HomeApp {
    private var redButton: Command? // Protocolì¸ Commandë¥¼ ê°€ì§
    private var numberButton: Command?

    func setCommand(redButton: Command, numberButton: Command) {
        self.redButton = redButton
        self.numberButton = numberButton
    }

    func pressRedButton() {
        redButton?.execute() // Commandì˜ excute()ë¥¼ í˜¸ì¶œ
    }

    func pressNumberButton() {
        numberButton?.execute()
    }
}

let homeApp = HomeApp()
let newTV = TV()
let turnOnTV = turnOnTVCommand(tv: newTV)
let changeChannelOfTV = changeChannelCommand(tv: newTV, channel: "11")

homeApp.setCommand(redButton: turnOnTV, numberButton: changeChannelOfTV)
homeApp.pressRedButton() // TVê°€ ì¼œì¡ŒìŠµë‹ˆë‹¤.
homeApp.pressNumberButton() // TVê°€ 11ë²ˆ ì±„ë„ì„ í‹€ì—ˆìŠµë‹ˆë‹¤.
```

- invokerì™€ receiverì™€ì˜ ì˜ì¡´ì„±ì´ ì—†ì–´ì„œ ë¶„ë¦¬ ê°€ëŠ¥

## 5. Iterator

> ì»¬ë ‰ì…˜ì˜ ìš”ì†Œë“¤ì˜ ê¸°ë³¸í‘œí˜„ì„ ë…¸ì¶œí•˜ì§€ ì•Šê³  ìˆœíšŒí•  ìˆ˜ ìˆëŠ” íŒ¨í„´
> 

### êµ¬ì¡°

![Untitled](%E1%84%92%E1%85%A2%E1%86%BC%E1%84%83%E1%85%A9%E1%86%BC%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%208e0831f9cb654f35b3b1266d1ea7b9a0/Untitled%207.png)

- **Container**Â â€“ Iteratorë¥¼ ë§Œë“œëŠ” ì—­í• 
    - `makeIterator()`Â ì›í•˜ëŠ” ê°ì²´ì˜ Iteratorë¥¼ ë¦¬í„´
- **Iterator**Â â€“ ê°ì²´ì˜ ìš”ì†Œì— ì ‘ê·¼í•˜ëŠ” ë°©ë²•ì„ ì œê³µ
    - `next()`Â ê°ì²´ì—ì„œ ë‹¤ìŒ ìš”ì†Œë¥¼ ë¦¬í„´
    - `prev()`Â ê°ì²´ì—ì„œ ì´ì „ ìš”ì†Œë¥¼ ë¦¬í„´
    - `getCurrent()`Â í˜„ì¬ ìœ„ì¹˜ì˜ ìš”ì†Œë¥¼ ë¦¬í„´
    - `isLast()`Â ê°ì²´ì˜ ë§ˆì§€ë§‰ ìš”ì†Œì¸ì§€ Boolê°’ì„ ë¦¬í„´
    - (`prev()`,Â `getCurrent()`,Â `isLast()`ëŠ” í•„ìš”ì— ë”°ë¼ ì„ íƒì ìœ¼ë¡œ êµ¬í˜„í•˜ë©´ ë©ë‹ˆë‹¤.)

<aside>
ğŸ’¡ Container â†’ **Sequence**ë¡œ ëŒ€ì²´ ê°€ëŠ¥
iterator â†’ **IteratorProtocol**ë¡œ ëŒ€ì²´ ê°€ëŠ¥

</aside>

```swift
// Iterator íŒ¨í„´ êµ¬í˜„
struct Food {
    let name: String
}

struct Foods {
    let foods: [Food]
}

struct FoodsIterator: IteratorProtocol {
    private var current = 0
    private let foods: [Food]

    init(foods: [Food] {
        self.foods = foods
    }

    mutating func next() -> Food? {
        defer { current += 1 }
        return foods.count > current ? foods[food] : nil
    }
}

extension Foods: Sequence {
    func makeIterator() -> FoodsIterator {
        return FoodsIterator(foods: foods)
    }
}
// Iterator ì‚¬ìš© - Client
let favoriteFoods = Foods(foods: [Food(name: "ë§ˆë¼íƒ•")])

for food in favoriteFoods {
    print("ë‚˜ëŠ” \(food)ì„/ë¥¼ ì¢‹ì•„í•´!")
}
```

## 6. Mediator

> ë‹¤ë¥¸ ê°ì²´ë“¤ê³¼ ì§ì ‘ í†µì‹ í•˜ì§€ ì•Šìœ¼ë©´ì„œ ì¤‘ì¬ìë¥¼ í†µí•´ í†µì‹ í•˜ëŠ” íŒ¨í„´
> 

![Untitled](%E1%84%92%E1%85%A2%E1%86%BC%E1%84%83%E1%85%A9%E1%86%BC%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%208e0831f9cb654f35b3b1266d1ea7b9a0/Untitled%208.png)

- ë°”ë¡œ í†µì‹ í•˜ëŠ” ê²ƒë³´ë‹¤ëŠ” ì‚¬ì´ì— ì¤‘ì¬ìë¥¼ ë‘ëŠ” ê²Œ í›¨ì”¬ ê²°í•©ë„ë¥¼ ë‚®ì¶”ëŠ” ì¢‹ì€ ë°©ë²•!

### êµ¬ì¡°

- component
    - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ í¬í•¨í•˜ëŠ” í´ë˜ìŠ¤
    - mediatorì— ëŒ€í•œ ì°¸ì¡°ë¥¼ ê°€ì§€ê³  ìˆìŒ
- mediator
    - ì»´í¬ë„ŒíŠ¸ê°„ì˜ í†µì‹ ì„ ìœ„í•œ ì¸í„°í˜ì´ìŠ¤
- concreteMediator
    - componentì— ëŒ€í•œ ì°¸ì¡°ë¥¼ ê°€ì§€ê³  componentê°„ì˜ í†µì‹ ì„ ë§¤ê°œ

```swift
// Mediator
protocol Mediator {
    func notify(sender: Component, price: Int)
}

// Component
class Component {
    var mediator: Mediator?
}

// concrete component
class Seller: Component {
    var isSold: Bool = false

    func sell(price: Int) {
        print("íŒë§¤ì: ê·¸ ê°€ê²©ì— ê±°ë˜í• ê²Œìš”.")

        mediator?.notify(sender: self, price: price)
    }
}

class Buyer: Component {
    var money: Int = 50000

    func buy() {
        print("êµ¬ë§¤ì: \(money)ì›ì— ì‚´ê²Œìš”.")
        self.mediator?.notify(sender: self, price: money)
    }

    func deposit(price: Int) {
        print("êµ¬ë§¤ì: \(price)ì› ì…ê¸ˆí–ˆìŠµë‹ˆë‹¤.")
        money -= price
    }
}

// ConcreteMediator
class Broker: Mediator {
    private let seller: Seller
    private let buyer: Buyer

    func notify(sender: Component, price: Int) {
        if sender is Buyer {
            seller.sell(price: price)
        }

        if sender is Seller {
            buyer.deposit(price: price)
            print("ì¤‘ë§¤ì: ê±°ë˜ê°€ ì„±ì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.")
        }
    }

    init(seller: Seller, buyer: Buyer) {
        self.seller = seller
        self.buyer = buyer
    }
}

let seller = Seller()
let buyer = Buyer()
let broker = Broker(seller: seller, buyer: buyer)

seller.mediator = broker
buyer.mediator = broker
buyer.buy()

/*
 êµ¬ë§¤ì: 50000ì›ì— ì‚´ê²Œìš”.
 íŒë§¤ì: ê·¸ ê°€ê²©ì— ê±°ë˜í• ê²Œìš”.
 êµ¬ë§¤ì: 50000ì› ì…ê¸ˆí–ˆìŠµë‹ˆë‹¤.
 ì¤‘ë§¤ì: ê±°ë˜ê°€ ì„±ì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.
 */

```

## 7. Memento

> ê°ì²´ë¥¼ ì´ì „ ìƒíƒœë¡œ ë˜ëŒë¦´ ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ ë””ìì¸ íŒ¨í„´
> 

### êµ¬ì¡°

![Untitled](%E1%84%92%E1%85%A2%E1%86%BC%E1%84%83%E1%85%A9%E1%86%BC%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%208e0831f9cb654f35b3b1266d1ea7b9a0/Untitled%209.png)

- originator
    - ìŠ¤ëƒ…ìƒ·ì„ ìƒì„±í•  ìˆ˜ ìˆê³  ë³µì›ë„ ê°€ëŠ¥
- memento
    - ìŠ¤ëƒ…ìƒ·ì—­í• ì„ í•˜ëŠ” ê°ì²´
- caretaker
    - ì–¸ì œ ìº¡ì²˜í•˜ê³  ì–¸ì œ ë³µì›ë˜ì–´ì•¼ í•˜ëŠ”ì§€ ì•„ëŠ” ëŒ‡ì²´
    - ê³¼ê±°ë¡œ ê°€ì•¼í•  ë•Œ ë©”ë©˜í† ë¥¼ ìŠ¤íƒì—ì„œ ê°€ì ¸ì™€ì„œ ì˜¤ë¦¬ì§€ë„¤ì´í„°ì˜ ë³µì› ë©”ì†Œë“œì— ì „ë‹¬

```swift
//'ë‚˜ì´'ë¼ëŠ” ìƒíƒœë¥¼ ì§€ë‹ˆê³  ìˆëŠ” ì˜¤ë¦¬ì§€ë„¤ì´í„°
class Originator {
    private var age: Int

    init(age: Int) {
        self.age = age
    }

    func setAge(to number: Int) {
        age = number
    }

    func getAge() -> Int {
        return age
    }
     //ì˜¤ë¦¬ì§€ë„¤ì´í„°ëŠ” ìŠ¤ëƒ…ìƒ·ì„ ìœ„í•œ ë©”ë©˜í†  ê°ì²´ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŒ(ì˜¤ë¦¬ì§€ë„¤ì´í„°ê°€ ë³µì›í•  ìˆ˜ë„ ë©”ë©˜í† ê°€ ë³µì›í•  ìˆ˜ë„ ìˆìŒ ì´ê±´ ìº¡ìŠí™” ì •ë„ì˜ ì°¨ì´!)
    func createMemento() -> Memento {
        return Memento(originator: self)
    }
}
//ë©”ë©˜í†  - ë‚˜ì´ë¼ëŠ” ìƒíƒœë¥¼ ì‚¬ì§„ì²˜ëŸ¼ ì°ì–´(ìŠ¤ëƒ…ìƒ·) ê°€ì§€ê³  ìˆì„ ê°ì²´
class Memento {
    private let originator: Originator // originatorë¥¼ ê°€ì§€ê³  ìˆì–´ì„œ ì—¬ê¸°ì„œ ë³µì› ë©”ì†Œë“œ í˜¸ì¶œ
    private let age: Int

    init(originator: Originator) {
        self.originator = originator
        age = originator.getAge()
    }

    func restore() {
        originator.setAge(to: age)
    }
}
//ì¼€ì–´í…Œì´ì»¤ - ì˜¤ë¦¬ì§€ë„¤ì´í„°ë¡œë¶€í„° ë©”ë©˜í† ë¥¼ ìš”ì²­í•˜ê³ (ë‚´ë¶€ ìƒíƒœ ì €ì¥ìš©)
//ì˜¤ë¦¬ì§€ë„¤ì´í„°ì—ê²Œ ë©”ë©˜í† ë¥¼ ë‹¤ì‹œ ëŒë ¤ì¤„ ìˆ˜ ìˆìŒ(ìƒíƒœ ë³µêµ¬ìš©)
class Caretaker {
    private var savedStates = [Memento]()

    func saveState(using memento: Memento) {
        savedStates.append(memento)
    }

    func restoreState() {
        if let lastState = savedStates.popLast() {
            lastState.restore()
        } else {
            print("ë³µêµ¬ ì‹¤íŒ¨!")
        }
    }
}

let originator = Originator(age: 21)
let caretaker = Caretaker()

//ì§€ê¸ˆ ë‚˜ì´ë¥¼ ì €ì¥í•´ë‘¬ì•¼ì§€~
caretaker.saveState(using: originator.createMemento())

originator.setAge(to: 22)
originator.setAge(to: 23)
originator.setAge(to: 24)

//ë‚˜ì´ ë¨¹ê¸° ì‹«ë‹¤!! íƒ€ì„ë¨¸ì‹ !!
caretaker.restoreState()

```

## 8. Observer

> ê´€ì°° ì¤‘ì¸ ê°ì²´ì—ì„œ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸ë¥¼ ì—¬ëŸ¬ ë‹¤ë¥¸ ê°ì²´ì— ì•Œë¦¬ëŠ” ë©”ì»¤ë‹ˆì¦˜ì„ ì •ì˜í•  ìˆ˜ ìˆëŠ” ë””ìì¸ íŒ¨í„´
> 

![Untitled](%E1%84%92%E1%85%A2%E1%86%BC%E1%84%83%E1%85%A9%E1%86%BC%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%208e0831f9cb654f35b3b1266d1ea7b9a0/Untitled%2010.png)

### êµ¬ì¡°

![Untitled](%E1%84%92%E1%85%A2%E1%86%BC%E1%84%83%E1%85%A9%E1%86%BC%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%208e0831f9cb654f35b3b1266d1ea7b9a0/Untitled%2011.png)

- `Publisher`
    - ì—¬ëŸ¬ ê°œì˜ Observerë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    - Observerì—ê²Œ ìƒíƒœì˜ ë³€ê²½ì„ ì•Œë ¤ì£¼ê³  Observerë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ì œê±°í•˜ëŠ” í”„ë¡œí† ì½œì„ ì œê³µí•©ë‹ˆë‹¤.
- `Concrete Publisher`
    - êµ¬ì²´ íƒ€ì…ì˜ Observer ë“¤ì„ ì†ì„±ìœ¼ë¡œ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.
    - Publisherì˜ ìƒíƒœë¥¼ ì €ì¥í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì•¼ ìƒíƒœê°€ ë³€ê²½ ë  ë•Œë§ˆë‹¤ Observerì—ê²Œ ì•Œë¦´ ìˆ˜ ìˆìœ¼ë‹ˆê¹Œìš”!
- `Observer(Subscriber)`
    - Publisherì˜ ë³€ê²½ ì‚¬í•­ì„ update ë°›ëŠ” í”„ë¡œí† ì½œì„ ì œê³µí•©ë‹ˆë‹¤.
- `Concrete Observer`
    - Concrete Publisherì˜ ìƒíƒœê°€ ë³€í•  ë•Œ ë§ˆë‹¤ ì´ë“¤ì—ê²Œ ì•Œë ¤ì¤ë‹ˆë‹¤.
    - Publisherì˜ ì†ì„±ì´ ì–´ë–»ê²Œ ë°”ë€Œì—ˆëŠ”ì§€Â **ì—…ë°ì´íŠ¸**í•˜ëŠ” ë©”ì„œë“œë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.

```swift
protocol Observer: AnyObject {
    var name: ObserverName { get }
    func didChange(name: String, from oldValue: String, to newValue: String)
}

protocol Publisher: AnyObject {
    var observers: [Observer] { get }
    func addObserver(name: ObserverName)
    func removeObserver(name: ObserverName)
}

enum ObserverName: CaseIterable {
    case jay
    case kitty
    case james
    case steven
    case ellen
    case soll
    case sooback
}

final class MyObserver: Observer {
    var name: ObserverName = .ellen

    func didChange(name: String, from oldValue: String, to newValue: String) {
        print("ë‚˜ëŠ” \(self.name) ê´€ì°°ìì—ìš”! \\(name)ì˜ í…ŒìŠ¤íŠ¸ ìˆ«ìê°€ \(oldValue ?? "")ì—ì„œ \(newValue)(ìœ¼)ë¡œ ë³€ê²½ë˜ì—ˆì–´ìš”")
    }
}

final class MyPublisher: Publisher {
    var observers: [Observer] = []
    private let publisherName = "Publisher"

    var testNumber: Int = 0 {
        didSet {
            observers.compactMap({ observer in
                observer.didChange(name: self.publisherName, from: "\\(oldValue)", to: "\\(self.testNumber)")
            })
        }
    }

    func addObserver(name: ObserverName) {
        let observer = MyObserver()
        observer.name = name
        self.observers.append(observer)
    }

    func removeObserver(name: ObserverName) {
        observers = self.observers.filter({ observer in
            observer.name != name
        })
    }
}

let publisher = MyPublisher()
publisher.addObserver(name: .ellen)
publisher.testNumber = 10
publisher.testNumber = 20
/*
 ë‚˜ëŠ” ellen ê´€ì°°ìì—ìš”! Publisherì˜ í…ŒìŠ¤íŠ¸ ìˆ«ìê°€ 0ì—ì„œ 10(ìœ¼)ë¡œ ë³€ê²½ë˜ì—ˆì–´ìš”
 ë‚˜ëŠ” ellen ê´€ì°°ìì—ìš”! Publisherì˜ í…ŒìŠ¤íŠ¸ ìˆ«ìê°€ 10ì—ì„œ 20(ìœ¼)ë¡œ ë³€ê²½ë˜ì—ˆì–´ìš”
 */

publisher.addObserver(name: .james)
publisher.testNumber = 30
/*
 ë‚˜ëŠ” ellen ê´€ì°°ìì—ìš”! Publisherì˜ í…ŒìŠ¤íŠ¸ ìˆ«ìê°€ 0ì—ì„œ 10(ìœ¼)ë¡œ ë³€ê²½ë˜ì—ˆì–´ìš”
 ë‚˜ëŠ” ellen ê´€ì°°ìì—ìš”! Publisherì˜ í…ŒìŠ¤íŠ¸ ìˆ«ìê°€ 10ì—ì„œ 20(ìœ¼)ë¡œ ë³€ê²½ë˜ì—ˆì–´ìš”

 ë‚˜ëŠ” ellen ê´€ì°°ìì—ìš”! Publisherì˜ í…ŒìŠ¤íŠ¸ ìˆ«ìê°€ 20ì—ì„œ 30(ìœ¼)ë¡œ ë³€ê²½ë˜ì—ˆì–´ìš”
 ë‚˜ëŠ” james ê´€ì°°ìì—ìš”! Publisherì˜ í…ŒìŠ¤íŠ¸ ìˆ«ìê°€ 20ì—ì„œ 30(ìœ¼)ë¡œ ë³€ê²½ë˜ì—ˆì–´ìš”
 */

publisher.removeObserver(name: .james)
publisher.testNumber = 20
/*
 ë‚˜ëŠ” ellen ê´€ì°°ìì—ìš”! Publisherì˜ í…ŒìŠ¤íŠ¸ ìˆ«ìê°€ 0ì—ì„œ 10(ìœ¼)ë¡œ ë³€ê²½ë˜ì—ˆì–´ìš”
 ë‚˜ëŠ” ellen ê´€ì°°ìì—ìš”! Publisherì˜ í…ŒìŠ¤íŠ¸ ìˆ«ìê°€ 10ì—ì„œ 20(ìœ¼)ë¡œ ë³€ê²½ë˜ì—ˆì–´ìš”

 ë‚˜ëŠ” ellen ê´€ì°°ìì—ìš”! Publisherì˜ í…ŒìŠ¤íŠ¸ ìˆ«ìê°€ 20ì—ì„œ 30(ìœ¼)ë¡œ ë³€ê²½ë˜ì—ˆì–´ìš”
 ë‚˜ëŠ” james ê´€ì°°ìì—ìš”! Publisherì˜ í…ŒìŠ¤íŠ¸ ìˆ«ìê°€ 20ì—ì„œ 30(ìœ¼)ë¡œ ë³€ê²½ë˜ì—ˆì–´ìš”

 ë‚˜ëŠ” ellen ê´€ì°°ìì—ìš”! Publisherì˜ í…ŒìŠ¤íŠ¸ ìˆ«ìê°€ 30ì—ì„œ 20(ìœ¼)ë¡œ ë³€ê²½ë˜ì—ˆì–´ìš”
 */
```

## 9. State

> ê°ì²´ ë‚´ë¶€ì˜ ìƒíƒœì— ë”°ë¼ì„œ ê°ì²´ê°€ ë‹¤ë¥¸ í–‰ë™ì„ í•˜ë„ë¡ í•´ì£¼ëŠ” íŒ¨í„´
> 
- strategy íŒ¨í„´ê³¼ ë§¤ìš° í¡ì‚¬

### êµ¬ì¡°

![Untitled](%E1%84%92%E1%85%A2%E1%86%BC%E1%84%83%E1%85%A9%E1%86%BC%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%208e0831f9cb654f35b3b1266d1ea7b9a0/Untitled%2012.png)

- context: stateë¥¼ ê°€ì§€ê³  ìˆê³  ìƒíƒœë³„ ì‘ì—…ì„ stateì—ê²Œ ìš°ì„
- state: ìƒíƒœì— ë”°ë¥¸ ê¸°ëŠ¥ë“¤ì— ëŒ€í•œ í”„ë¡œí† ì½œ
- concrete state: state í”„ë¡œí† ì½œì„ ì±„íƒí•˜ì—¬ ì‹¤ì œ ë©”ì†Œë“œë¥¼ êµ¬í˜„

```swift
//Context
class Light {
    var state: State // stateë¥¼ ê°€ì§€ê³  ê´€ë¦¬

    init(lightState: State) {
        self.state = lightState
    }

    func changeStateToOn() {
        print("ë¶ˆ ì¼œëŠ” ë²„íŠ¼ ëˆ„ë¦„")
        state.onButtonPushed() // stateì—ê²Œ í–‰ë™ì„ ìœ„ì„
        state = TurnOnState()
    }

    func changeStateToOff() {
        print("ë¶ˆ ë„ëŠ” ë²„íŠ¼ ëˆ„ë¦„")
        state.offButtonPushed()
        state = TurnOffState()
    }
}

//State
protocol State {
    func onButtonPushed()
    func offButtonPushed()
}

//Concrete State
class TurnOnState: State {
    func onButtonPushed() {
        print("ì´ë¯¸ ë¶ˆ ì¼œì§. ë°˜ì‘ ì—†ìŒ")
    }

    func offButtonPushed() {
        print("ë¶ˆì„ ëˆë‹¤")
    }
}

class TurnOffState: State {
    func onButtonPushed() {
        print("ë¶ˆì„ ì¼ ë‹¤")
    }

    func offButtonPushed() {
        print("ì´ë¯¸ êº¼ì ¸ìˆìŒ. ë°˜ì‘ ì—†ìŒ")
    }
}

//ì‹¤í–‰ ê²°ê³¼
light.changeStateToOff()

light.changeStateToOn()
light.changeStateToOn()

light.changeStateToOff()
light.changeStateToOff()

/*
ë¶ˆ ë„ëŠ” ë²„íŠ¼ ëˆ„ë¦„
ì´ë¯¸ êº¼ì ¸ìˆìŒ. ë°˜ì‘ ì—†ìŒ
ë¶ˆ ì¼œëŠ” ë²„íŠ¼ ëˆ„ë¦„
ë¶ˆì„ ì¼ ë‹¤
ë¶ˆ ì¼œëŠ” ë²„íŠ¼ ëˆ„ë¦„
ì´ë¯¸ ë¶ˆ ì¼œì§. ë°˜ì‘ ì—†ìŒ
ë¶ˆ ë„ëŠ” ë²„íŠ¼ ëˆ„ë¦„
ë¶ˆì„ ëˆë‹¤
ë¶ˆ ë„ëŠ” ë²„íŠ¼ ëˆ„ë¦„
ì´ë¯¸ êº¼ì ¸ìˆìŒ. ë°˜ì‘ ì—†ìŒ
*/
```

## 10. Strategy

> **ì‹¤í–‰ ì¤‘ì—** ì•Œê³ ë¦¬ì¦˜ì„ ì„ íƒí•˜ê²Œ í•´ì„œ **ì—¬ëŸ¬ ì „ëµë“¤ì„ ì„ íƒ**í•´ì„œ ì“¸ ìˆ˜ ìˆëŠ” íŒ¨í„´
> 
- ëŸ°íƒ€ì„ì— ì›í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì„ ì„ íƒ!

ex) ì§€ë„ ì•± ê¸¸ì°¾ê¸° 

í•™êµ â†’ ì§‘ê¹Œì§€ì˜ í–‰ìœ„ëŠ” ë™ì¼í•˜ì§€ë§Œ ê±¸ì–´ì„œ, ì°¨íƒ€ê³ , ì§€í•˜ì²  ë“±ë“±ì˜ ë‹¤ì–‘í•œ ì•Œê³ ë¦¬ì¦˜ì´ ì¡´ì¬í•˜ê³  ìš°ë¦¬ëŠ” ì‹¤ì‹œê°„ìœ¼ë¡œ ì•Œê³ ë¦¬ì¦˜ì„ ì„ íƒ

### êµ¬ì¡°

![Untitled](%E1%84%92%E1%85%A2%E1%86%BC%E1%84%83%E1%85%A9%E1%86%BC%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%208e0831f9cb654f35b3b1266d1ea7b9a0/Untitled%2013.png)

```swift
// strategy
protocol Strategy {
    func ê¸¸ì°¾ê¸°()
}

// concreteStrategy
class Car: Strategy {
    func ê¸¸ì°¾ê¸°() {
        print("ìë™ì°¨ ê²½ë¡œë¥¼ íƒìƒ‰í•©ë‹ˆë‹¤.")
    }
}

class PublicTransport: Strategy {
    func ê¸¸ì°¾ê¸°() {
        print("ëŒ€ì¤‘êµí†µ ê²½ë¡œë¥¼ íƒìƒ‰í•©ë‹ˆë‹¤.")
    }
}

class Walk: Strategy {
    func ê¸¸ì°¾ê¸°() {
        print("ë„ë³´ ê²½ë¡œë¥¼ íƒìƒ‰í•©ë‹ˆë‹¤.")
    }
}

class Bicycle: Strategy {
    func ê¸¸ì°¾ê¸°() {
        print("ìì „ê±° ê²½ë¡œë¥¼ íƒìƒ‰í•©ë‹ˆë‹¤.")
    }
}

class SharedScooter: Strategy {
    func ê¸¸ì°¾ê¸°() {
        print("ê³µìœ í‚¥ë³´ë“œ ê²½ë¡œë¥¼ íƒìƒ‰í•©ë‹ˆë‹¤.")
    }
}

// context
class ì§€ë„ì•± {
    private var strategy: Strategy = PublicTransport()

    init() {
        print("ì§€ë„ì•± ì„œë¹„ìŠ¤ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤.\\n")
    }

    func ì „ëµì„¤ì •(to strategy: Strategy) {
        self.strategy = strategy
    }

    func ê¸¸ì°¾ê¸°() {
        strategy.ê¸¸ì°¾ê¸°()
    }
}

let map = ì§€ë„ì•±()

// ì´ˆê¸° ì „ëµ: ëŒ€ì¤‘êµí†µ
map.ê¸¸ì°¾ê¸°()

// ëŒ€ì¤‘êµí†µì—ì„œ ìì „ê±°ë¡œ ì „ëµ ë³€ê²½
map.ì „ëµì„¤ì •(to: Bicycle())
map.ê¸¸ì°¾ê¸°()

// ìì „ê±°ì—ì„œ ê³µìœ í‚¥ë³´ë“œë¡œ ì „ëµ ë³€ê²½
map.ì „ëµì„¤ì •(to: SharedScooter())
map.ê¸¸ì°¾ê¸°()

/*
ì§€ë„ì•± ì„œë¹„ìŠ¤ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤.

ëŒ€ì¤‘êµí†µ ê²½ë¡œë¥¼ íƒìƒ‰í•©ë‹ˆë‹¤.
ìì „ê±° ê²½ë¡œë¥¼ íƒìƒ‰í•©ë‹ˆë‹¤.
ê³µìœ í‚¥ë³´ë“œ ê²½ë¡œë¥¼ íƒìƒ‰í•©ë‹ˆë‹¤.
*/
```

<aside>
ğŸ’¡ state vs strategy
stateëŠ” ì‚¬ìš©ìê°€ stateë¥¼ ì œì–´í•˜ì§€ ì•Šì§€ë§Œ strategyëŠ” ì‚¬ìš©ìê°€ ì§ì ‘ ì„ íƒí•œë‹¤ëŠ” ì°¨ì´ì  ì¡´ì¬!

</aside>

## 11. Visitor

> ì•Œê³ ë¦¬ì¦˜ì„ ê°ì²´ êµ¬ì¡°ì—ì„œ ë¶„ë¦¬ì‹œí‚¤ëŠ” ë””ìì¸ íŒ¨í„´!
> 
- ì‹¤ì œ ë¡œì§ì„ ê°–ê³  ìˆëŠ” visitorê°€ elementì— ì ‘ê·¼í•˜ë©´ì„œ elementì— í•´ë‹¹í•˜ëŠ” ë¡œì§ì„ ìˆ˜í–‰í•˜ëŠ” íŒ¨í„´

![ë³´í—˜ì„ íŒŒëŠ” ë¡œì§ì„ ê°€ì§„ ë³´í—˜ì„¤ê³„ì‚¬ê°€ íšŒì‚¬, ì§‘ ë“±ë“±ì„ ëŒì•„ë‹¤ë‹ˆë©´ì„œ íŒë§¤](%E1%84%92%E1%85%A2%E1%86%BC%E1%84%83%E1%85%A9%E1%86%BC%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%208e0831f9cb654f35b3b1266d1ea7b9a0/Untitled%2014.png)

ë³´í—˜ì„ íŒŒëŠ” ë¡œì§ì„ ê°€ì§„ ë³´í—˜ì„¤ê³„ì‚¬ê°€ íšŒì‚¬, ì§‘ ë“±ë“±ì„ ëŒì•„ë‹¤ë‹ˆë©´ì„œ íŒë§¤

### êµ¬ì¡°

![Untitled](%E1%84%92%E1%85%A2%E1%86%BC%E1%84%83%E1%85%A9%E1%86%BC%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%208e0831f9cb654f35b3b1266d1ea7b9a0/Untitled%2015.png)

- visitor: elementì— ë°©ë¬¸í–ˆì„ ë•Œ ìˆ˜í–‰í•  ë™ì‘ì„ ì •ì˜í•œ í”„ë¡œí† ì½œ
- element: visitorê°€ ë°©ë¬¸í•˜ë©´ì„œ ìˆ˜í–‰í•´ì•¼í•˜ëŠ” ëŒ€ìƒ
    - visitorë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” accept ë©”ì†Œë“œë¥¼ ê°€ì§€ê³  ìˆìŒ

```swift
// visitor
protocol Tutor {
    func teach(student: YagomSchoolStudent)
    func teach(student: JostSchoolStudent)
}

extension Tutor {
    func teach(student: YagomSchoolStudent) {
        print("\(student.name), ê³µë¶€í•˜ì„¸ìš”.")
    }

    func teach(student: JostSchoolStudent) {
        print("\(student.name), ê³µë¶€í•˜ì„¸ìš”")
    }
}

class MathTutor: Tutor { }

class EnglishTutor: Tutor { }

// element
protocol Student {
		// visitorë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì•„ì„œ visitorì˜ ë¡œì§ì„ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜
    func receivePrivateLesson(tutor: Tutor)
}

class YagomSchoolStudent: Student {
    let name: String

    init(name: String) {
        self.name = name
    }

    func receivePrivateLesson(tutor: Tutor) {
        tutor.teach(student: self)
    }
}

class JostSchoolStudent: Student {
    let name: String

    init(name: String) {
        self.name = name
    }

    func receivePrivateLesson(tutor: Tutor) {
        tutor.teach(student: self)
    }
}

func run() {
    let yagom = YagomSchoolStudent(name: "yagom")
    let jost = JostSchoolStudent(name: "jost")

    let mathTutor = MathTutor()
    yagom.receivePrivateLesson(tutor: mathTutor)
    jost.receivePrivateLesson(tutor: mathTutor)

    let englishTutor = EnglishTutor()
    yagom.receivePrivateLesson(tutor: englishTutor)
    jost.receivePrivateLesson(tutor: englishTutor)
}
```

<aside>
ğŸ’¡ visitor patternì€ elementê°€ ì¶”ê°€ë˜ëŠ” ê²½ìš°ëŠ” ì ì€ë° visitorê°€ ì¶”ê°€ë  ê°€ëŠ¥ì„±ì´ ë§ì„ ë•Œ ìœ ìš©

</aside>