---
layout: post
title: 1. ë””ìì¸ íŒ¨í„´ - ìƒì„± íŒ¨í„´
date: 2024-03-06 19:20:23 +0900
category: SoftwareEngineering
---
# ìƒì„± íŒ¨í„´

ì¢…ë¥˜: Pattern

## 1. ìƒì„±- Builder

> ë¹Œë”íŒ¨í„´ì€ ë³µí•© ê°ì²´ì˜ ìƒì„± ê³¼ì •ê³¼ í‘œí˜„ ë°©ë²•ì„ ë¶„ë¦¬í•˜ì—¬ ë™ì¼í•œ ìƒì„± ì ˆì°¨ì—ì„œ ì„œë¡œ ë‹¤ë¥¸ í‘œí˜„ ê²°ê³¼ë¥¼ ë§Œë“¤ì–´ì£¼ëŠ” íŒ¨í„´ì´ë‹¤!
> 

ex) ë§¥ë¶ ê³µì¥ ì‹œìŠ¤í…œ: ì»¨ë² ì´ì–´ ë²¨íŠ¸ ì‹œìŠ¤í…œìœ¼ë¡œ ë™ì¼í•˜ê²Œ ë§Œë“¤ì§€ë§Œ ë§¥ë¶ë§ˆë‹¤ ìŠ¤í™ì´ ë‹¤ë¥´ê²Œ ì»¤ìŠ¤í…€ ê°€ëŠ¥!

### êµ¬ì¡°

![Untitled](%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%20c2b98492783b47cab4067ae87344a74f/Untitled.png)

builderì˜ setValuesë¡œ ì»¤ìŠ¤í…€í•  ê°’ë“¤ì„ ì„¸íŒ…í•œ í›„ì— buildë¥¼ í†µí•´ productë¥¼ ìƒì„±

```swift
// Produce
struct MacBook {
    let color: String
    let memory: Int
    let storage: String
    let hasTouchBar: Bool
}

// Builder
class MacBookBuilder {
    private var color = "Space Gray"
    private var memory = 16
    private var storage = "256GB"
    private var hasTouchBar = false

    func setColor(_ color: String) -> MacBookBuilder {
        self.color = color
        return self
    }

    func setMemory(_ memory: Int) -> MacBookBuilder {
        self.memory = memory
        return self
    }

    func setStorage(_ storage: String) -> MacBookBuilder {
        self.storage = storage
        return self
    }

    func setHasTouchBar(_ has: Bool) -> MacBookBuilder {
        self.hasTouchBar = has
        return self
    }

    func build() -> MacBook {
        return MacBook(color: color, memory: memory, storage: storage, hasTouchBar: hasTouchBar)
    }
}

let builder = MacBookBuilder()
let macBook1 = builder.setColor("Silver")
											.setMemory(32)
											.setStorage("512")
											.setHasTouchBar(true).build()
let macBook2 = builder.setMemory(32).setStorage("1TB").build()
let macBook3 = builder.build()
```

<aside>
ğŸ’¡ Uniwaffleì—ì„œ ë§Œë“¤ì—ˆë˜ UIBuilder ë¼ì´ë¸ŒëŸ¬ë¦¬ ì´ë¦„ì´ ì™œ Builderì˜€ëŠ”ì§€ë¥¼ ë– ì˜¬ë¦¬ë©´ ê¸ˆë°© ì´í•´ ê°€ëŠ¥!

</aside>

## 2. ìƒì„± - Prototype

cf. prototype: ìƒì„±í•  ê°ì²´ë“¤ì˜ íƒ€ì…ì´ í”„ë¡œí† íƒ€ì…ì¸ ì¸ìŠ¤í„´ìŠ¤ë¡œë¶€í„° ê²°ì •ë˜ë„ë¡ í•˜ë©° ì¸ìŠ¤í„´ìŠ¤ëŠ” ìƒˆ ê°ì²´ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ìì‹ ì„ ë³µì œ

> ì¶”ìƒíŒ©í† ë¦¬ íŒ¨í„´ì™€ ë‹¬ë¦¬ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ ë‚´ì—ì„œ Creatorë¥¼ subclassí•˜ëŠ” ê±¸ ë§‰ì•„ì¤€ë‹¤
ì¼ë°˜ì ì¸ ë°©ë²•ìœ¼ë¡œ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ê³ ìœ ì˜ ë¹„ìš©ì´ ë„ˆë¬´ í´ ë•Œ ìœ ìš©í•˜ë‹¤!
> 

### êµ¬ì¡°

![Untitled](%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%20c2b98492783b47cab4067ae87344a74f/Untitled%201.png)

cloneí•˜ëŠ” í”„ë¡œí† ì½œì¸ Prototypeì„ ë§Œë“¤ê³  ë³µì œí•˜ê³  ì‹¶ì€ classëŠ” í•´ë‹¹ í”„ë¡œí† ì½œì„ êµ¬í˜„í•˜ëŠ” í˜•íƒœ

```swift
protocol Prototype: AnyObject {
    func clone() -> Self
}

class Odongnamu: Prototype {
    var age: Int

    init(age: Int) {
        self.age = age
    }

    func clone() -> Self {
        return Odongnamu(age: self.age) as! Self
    }
}

let odongnamu = Odongnamu(age: 500)
odongnamu.age += 50
print(odongnamu.age) // 100

let odongnamu2 = odongnamu.clone()
odongnamu2.age += 30
print(odongnamu2.age) // 80
```

## 3. ìƒì„± - Factory Method Pattern

> ë¶€ëª¨ í´ë˜ìŠ¤ì— ì•Œë ¤ì§€ì§€ ì•Šì€ êµ¬ì²´ì ì¸ í´ë˜ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” íŒ¨í„´
ìì‹ í´ë˜ìŠ¤ê°€ ì–´ë–¤ ê°ì²´ë¥¼ ìƒì„±í• ì§€ ê²°ì •
> 

ex) ì œí’ˆì— ë”°ë¼ ê³µì¥ì˜ ìƒì‚°ë¼ì¸ì„ ë°”ê¾¸ëŠ” ê²Œ ì•„ë‹ˆë¼ ê¸°ë³¸ì´ ë˜ëŠ” ìƒì‚°ë¼ì¸ì€ ì„¤ì¹˜í•´ë†“ê³  ìš”ì²­ì— ë§ëŠ” ì œí’ˆì„ ìƒì‚°í•´ì£¼ëŠ” íŒ¨í„´! ì—¬ê¸°ì„œ ë§¹ì ì€ ì–´ë– í•œ ìš”ì²­ì´ ë“¤ì–´ì˜¬ì§€ëŠ” ëª¨ë¥¸ë‹¤ëŠ” ê²ƒ!!!!

### êµ¬ì¡°

![Untitled](%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%20c2b98492783b47cab4067ae87344a74f/Untitled%202.png)

- Creator: Factoryì˜ ì—­í• ì„ ì •ì˜í•œ í”„ë¡œí† ì½œ
- Product: Productê°€ í•´ì•¼í•˜ëŠ” ì—­í• ì— ëŒ€í•´ ì •ì˜í•œ í”„ë¡œí† ì½œ
- ConcreateCreator: Creatorë¥¼ ì±„íƒí•˜ë©´ì„œ productì— ë§ëŠ” êµ¬ì²´ì  ê¸°ëŠ¥ì„ êµ¬í˜„
- ConcreateProduct: Productë¥¼ ì±„íƒí•˜ë©° ê·¸ì— ë§ëŠ” ì‹¤ì œ ê°ì²´

```swift
// Creator
protocol AppleFactory {
    func createElectronics() -> Product
}

// Concrete Creator
class IPhoneFactory: AppleFactory {
    func createElectronics() -> Product {
        return IPhone()
    }
}

class IPadFactory: AppleFactory {
    func createElectronics() -> Product {
        return IPad()
    }
}

// Product
protocol Product {
    func produceProduct()
}

// Concrete Product
class IPhone: Product {
    func produceProduct() {
        print("Hello, iPhone was made")
    }
}

class IPad: Product {
    func produceProduct() {
        print("Hello, iPad wad made")
    }
}

class Client {
// í”„ë¡œí† ì½œì„ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ìœ¼ë‹ˆê¹Œ ì–´ë–¤ ì£¼ë¬¸ì´ ë“¤ì–´ì˜¤ëŠ”ì§€ ëª¨ë¥´ëŠ” ìƒíƒœì´ê³  ì£¼ë¬¸ì´ ë“¤ì–´ì˜¬ ë•Œ ì•Œê²Œ ë¨!
    func order(factory: AppleFactory) {
        let elctronicsProduct = factory.createElectronics()
        elctronicsProduct.produceProduct()
    }
}

var client = Client()

client.order(factory: IPadFactory()) 
client.order(factory: IPhoneFactory())

/*
Hello, iPad was made
Hello, iPhone was made
*/
```

### **ì¥ì **

- í”„ë¡œí† ì½œë¡œ ê¸°ë³¸ ê¸°ëŠ¥ì„ ì •ì˜í•´ì£¼ì—ˆê¸° ë•Œë¬¸ì— ê¸°ì¡´ ì½”ë“œë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³  ìƒˆë¡œìš´ í•˜ìœ„í´ë˜ìŠ¤ë¥¼ ì¶”ê°€ê°€ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— ìœ ì—°í•˜ê³  í™•ì¥ì„±ì´ ë†’ë‹¤.
- ì½”ë“œì— ìˆ˜ì • ì‚¬í•­ì´ ìƒê¸°ë”ë¼ë„ íŒ©í† ë¦¬ ë©”ì†Œë“œë§Œ ìˆ˜ì •í•˜ë©´ ë˜ê¸° ë•Œë¬¸ì— ìˆ˜ì •ì— ìš©ì´í•˜ë‹¤.

### **ë‹¨ì **

- productê°€ ì¶”ê°€ë  ë•Œë§ˆë‹¤ ìƒˆë¡­ê²Œ í•˜ìœ„ í´ë˜ìŠ¤ë¥¼ ì •ì˜í•´ì£¼ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ë¶ˆí•„ìš”í•˜ê²Œ ë§ì€ í´ë˜ìŠ¤ê°€ ì •ì˜ë˜ì–´ì§ˆ ìˆ˜ ìˆê³  ê·¸ëŸ¬ë‹¤ë³´ë©´ ë³µì¡í•´ì§€ëŠ” ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.
- ì¤‘ì²©ë˜ì–´ ì‚¬ìš©ë˜ë©´ ë§¤ìš° ë³µì¡í•´ì§ˆ ìš°ë ¤ê°€ ìˆë‹¤.

## 4. ìƒì„± - Abstract Factory

> ê¸°ì¡´ íŒ©í† ë¦¬ë¥¼ í•œë²ˆ ë” ì¶”ìƒí™”í•´ì„œ ì„œë¡œ ê´€ë ¨ìˆëŠ” ì œí’ˆêµ°ì„ ìƒì„±í•˜ê²Œ í•´ì¤Œ
> 

Q. í•œë²ˆ ë” ì¶”ìƒí™”ê°€ ë¬´ìŠ¨ ë§ì¼ê¹Œ???

A. ë§Œì•½ì— ë²„íŠ¼ì„ ë§Œë“¤ì–´ì£¼ëŠ” íŒ©í† ë¦¬ì™€ ë ˆì´ë¸”ì„ ë§Œë“¤ì–´ì£¼ëŠ” íŒ©í† ë¦¬ê°€ ìˆì—ˆìŒ.

ê·¼ë° ipad, iphone UIê°€ ê°ê° í•„ìš”í•¨!!

ê·¸ëŸ¬ë©´ ë²„íŠ¼, ë ˆì´ë¸” íŒ©í† ë¦¬ë¥¼ í•œë²ˆ ë” ì¶”ìƒí™”í•´ì„œ ipad, iphone íŒ©í† ë¦¬ë¥¼ ë§Œë“¤ë©´ í•´ê²°ë¨!!

### ì–¸ì œ ì‚¬ìš©ë ê¹Œ?

- ìƒì„±ì„ ì±…ì„ì§€ëŠ” í´ë˜ìŠ¤ë¥¼ ë¶„ë¦¬í•˜ê³  ì‹¶ì„ ë•Œ
- ì—¬ëŸ¬ ì œí’ˆêµ° ì¤‘ ì„ íƒí•´ì„œ ì‹œìŠ¤í…œì„ êµ¬ì„±í•˜ê³  ì œí’ˆêµ°ì„ ëŒ€ì²´í•˜ê³  ì‹¶ì„ ë•Œ

### Factory VS Abstract Factory

![Untitled](%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%20c2b98492783b47cab4067ae87344a74f/Untitled%203.png)

- ì•„ê¹Œì˜ ì˜ˆì‹œëŒ€ë¡œ í•œë‹¤ë©´ iphoneìš© ë²„íŠ¼, ipadìš© ë²„íŠ¼ìœ¼ë¡œ ë‚˜ëˆ ì„œ ì²˜ë¦¬ë¥¼ í•´ì•¼í•¨
- ê·¸ë¦¬ê³  iphoneì€ iphone button, iphone label ë“±ë“±ì„ ëª¨ë‘ ê°€ì§€ê³  ìˆê²Œ ë˜ë‹ˆê¹Œ ë§Œì•½ì— ì—¬ê¸°ì„œ radio buttonì´ ì¶”ê°€ëœë‹¤ë©´ ê´€ë¦¬í•˜ê¸°ê°€ ê¹Œë‹¤ë¡œì›Œ ì§€ëŠ” ê±°ì§€!!
- ê·¸ë¦¬ê³  apple watch ê°€ ì¶”ê°€ëœë‹¤ë©´ ë˜ ê·¸ë§Œí¼ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì•¼í•˜ê²Œ ë¨ ã… ã… 

![Untitled](%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%20c2b98492783b47cab4067ae87344a74f/Untitled%204.png)

```swift
import Foundation

// ì¶”ìƒí™”ëœ Factory
protocol UIFactoryalbe {
    func createButton() -> Buttonalbe
    func createLabel() -> Labelable
}

// ì—°ê´€ëœ ì œí’ˆêµ°ì„ ì‹¤ì œë¡œ ìƒì„±í•˜ëŠ” êµ¬ì²´ Factory
final class iPadUIFactoy: UIFactoryalbe {
    func createButton() -> Buttonalbe {
        return IPadButton()
    }

    func createLabel() -> Labelable {
        return IPadLabel()
    }
}

final class iPhoneUIFactory: UIFactoryalbe {
    func createButton() -> Buttonalbe {
        return IPhoneButton()
    }

    func createLabel() -> Labelable {
        return IPhoneLabel()
    }
}
```

```swift
import Foundation

// ì¶”ìƒí™”ëœ Product 
protocol Buttonalbe {
    func touchUP()
}

protocol Labelable {
    var title: String { get }
}

// ì‹¤ì œë¡œ ìƒì„±ë  êµ¬ì²´ Product, ê°ì²´ê°€ ê°€ì§ˆ ê¸°ëŠ¥ê³¼ ìƒíƒœë¥¼ êµ¬í˜„
final class IPhoneButton: Buttonalbe {
    func touchUP() {
        print("iPhoneButton")
    }
}

final class IPadButton: Buttonalbe {
    func touchUP() {
        print("iPadButton")
    }
}

final class IPhoneLabel: Labelable {
    var title: String = "iPhoneLabel"
}

final class IPadLabel: Labelable {
    var title: String = "iPadLabel"
}
```

```swift
import UIKit

class ViewController: UIViewController {

        //UIë¥¼ ê°€ì§€ê³  ìˆëŠ” ì¸ìŠ¤í„´ìŠ¤ ê¸°ê¸°ë³„ë¡œ ì„¤ì •
    var iPadUIContent = UIContent(uiFactory: iPadUIFactoy())
    var iPhoneUIContent = UIContent()

    override func viewDidLoad() {
        super.viewDidLoad()
        touchUpButton()
        printLabelTitle()
    }

    func touchUpButton() {
        iPadUIContent.button?.touchUP()
        iPhoneUIContent.button?.touchUP()
    }

    func printLabelTitle() {
        print(iPadUIContent.label?.title ?? "")
        print(iPhoneUIContent.label?.title ?? "")
    }
}

//Factoryë¥¼ í†µí•´ UIë¥¼ ë§Œë“¤ê³  ê°€ì§€ê³  ìˆëŠ” Class
class UIContent {
    var uiFactory: UIFactoryalbe
    var label: Labelable?
    var button: Buttonalbe?

    //ì‚¬ìš©í•  UIì˜ Default ê°’ì€ iPhone
    init(uiFactory: UIFactoryalbe = iPhoneUIFactory()) {
        self.uiFactory = uiFactory
        setUpUI()
    }

        //ê¸°ê¸°ì— ë§ëŠ” UIë“¤ ì„¤ì •
    func setUpUI() {
        label = uiFactory.createLabel()
        button = uiFactory.createButton()
    }
}

```

## 5. ìƒì„± - Singleton

> íŠ¹ì • í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ì˜¤ì§ í•˜ë‚˜ì„ì„ ë³´ì¥í•œë‹¤!
> 
- ì „ì—­ì ìœ¼ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ìœ ì¼í•œ ê°ì²´ í•˜ë‚˜ë¥¼ ë§Œë“¤ìë¼ëŠ” ì˜ë¯¸!!

```swift
class Singleton {
    // 1
    static let defaults = Singleton()
    // 2
    private init() { }
}
```

<aside>
ğŸ’¡ ì‹±ê¸€í„´ íŒ¨í„´ì€ ì£¼ë¡œ í´ë˜ìŠ¤ë¡œ êµ¬í˜„ë˜ì§€ë§Œ structìœ¼ë¡œë„ êµ¬í˜„ì€ ê°€ëŠ¥í•¨! í•˜ì§€ë§Œ ì‹±ê¸€í†¤íŒ¨í„´ì˜ ëª©ì  ìì²´ê°€ ìœ ì¼í•œ ê°ì²´ì¸ë° structìœ¼ë¡œ ë§Œë“¤ë©´ ìœ ì¼í•œ ê°ì²´ê°€ ë˜ì§€ ì•ŠëŠ”ë‹¤!!

```swift
struct Singleton {
    static let shared = Singleton()
    private init() { }
}

func address(of object: UnsafeRawPointer) -> String {
    let address = Int(bitPattern: object)
    return String(format: "%p", address)
}

var singleton1 = Singleton.shared
var singleton2 = Singleton.shared

print(address(of: &singleton1))
print(address(of: &singleton2))

/* 
0x1030fca90
0x1030fca98
*/
```

</aside>
