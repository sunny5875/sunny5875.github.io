---
layout: post
title: v0.2.0 개발하면서 알게 된 점
date: 2023-07-14 19:20:23 +0900
category: Swift
---

# v0.2.0 개발하면서 알게 된 점

---

<aside>
✅ swiftLint를 사용하면 convention을 자동으로 감지하게 해준다!!

- 규칙은 마음대로 설정 가능
- [https://didu-story.tistory.com/274](https://didu-story.tistory.com/274) 참고
</aside>

### 네비게이션 제목을 누르면 편집되게 하려면?

- titleView에 버튼을 넣으면 된다!

<aside>
✅ *iphone에 파일을 저장할 때에는 infoList에서 Application supports iTunes file sharing와 Supports opening documents in place를 true로 바꿔야 한다!!*

</aside>

<aside>
✅ 여러개가  같은 라이브러리 시리즈 를 쓰고 있는 경우(RxSwift, RxAlamofire, RxKeyboard) cocoapods나 spm 중 하나를 선택해서 라이브러리를 연결하는 방법을 한개로 통일해야 어마무시한 로그가 뜨지 않는다!

</aside>

### 타이머가 백그라운드에서 동작하지 않는다?

```cpp
var bgTask = UIBackgroundTaskIdentifier()
    bgTask = UIApplication.shared.beginBackgroundTask(expirationHandler: {
        UIApplication.shared.endBackgroundTask(bgTask)
    })
    let timer = Timer.scheduledTimer(timeInterval: 10, target: self, selector: #selector(notificationReceived), userInfo: nil, repeats: true)
    RunLoop.current.add(timer, forMode: RunLoopMode.defaultRunLoopMode)
```

### 네비게이션 동작 시 tabbar가 나오다가 사라지다가 하는 이슈가 있다면?

```swift
override func viewWillAppear(_ animated: Bool) {
        super.viewWillAppear(animated)
        
        navigationController?.setNavigationBarHidden(true, animated: true)
       // hidesBottomBarWhenPushed = true
        print("home will appear ", hidesBottomBarWhenPushed)
    }
    
    override func viewDidAppear(_ animated: Bool) {
        super.viewDidAppear(animated)
        hidesBottomBarWhenPushed = true
        print("home did appear ", hidesBottomBarWhenPushed)
    }

    
    override func viewWillDisappear(_ animated: Bool) {
        super.viewWillDisappear(animated)
        
        navigationController?.setNavigationBarHidden(false, animated: true)
        hidesBottomBarWhenPushed = false
        print("home will disappear ", hidesBottomBarWhenPushed)
    }
    
    override func viewDidDisappear(_ animated: Bool) {
        super.viewDidDisappear(animated)
        
        print("home did disappear ", hidesBottomBarWhenPushed)
    }
```

### Realm을 쉽게 보고 싶다면?

- [https://app-developer.tistory.com/173](https://app-developer.tistory.com/173) 참고!! 아주 쉬움

### 네트워크 연결 안되면 토스트 띄우고 싶다면?

- 어떻게 함수 하나로 통일해서 만들지 고민하다가 결국 uiviewcontroller에 extension으로 함수를 만드는 것이 최선이라고 생각함

```cpp
//
//  NetworkConnectionManager.swift
//  uniwaffle-Application-iOS
//
//  Created by 현수빈 on 2023/02/21.
//
import Foundation
import Network
import UIKit

final class NetworkMonitor {
    static let shared = NetworkMonitor()
    
    private let queue = DispatchQueue.global()
    private let monitor: NWPathMonitor
    public private(set) var isConnected: Bool = false
    public private(set) var connectionType: ConnectionType = .unknown
    
    /// 연결타입
    enum ConnectionType {
        case wifi
        case cellular
        case ethernet
        case unknown
    }
    
    private init() {
        monitor = NWPathMonitor()
    }
    
    public func startMonitoring() { //app delegate에서 호출해야 모니터링이 시작됨
        monitor.start(queue: queue)
        monitor.pathUpdateHandler = { [weak self] path in
            print("path :\(path)")

            self?.isConnected = path.status == .satisfied
            self?.getConenctionType(path)
            
            if self?.isConnected == true {
                print("연결된 상태!")
            } else {
                print("연결 안된 상태!")
            }
        }
    }
    public func stopMonitoring() {
        print("stopMonitoring 호출")
        monitor.cancel()
    }
    
    private func getConenctionType(_ path: NWPath) {
        print("getConenctionType 호출")
        if path.usesInterfaceType(.wifi) {
            connectionType = .wifi
            print("wifi에 연결")
        } else if path.usesInterfaceType(.cellular) {
            connectionType = .cellular
            print("cellular에 연결")
        } else if path.usesInterfaceType(.wiredEthernet) {
            connectionType = .ethernet
            print("wiredEthernet에 연결")
        } else {
            connectionType = .unknown
            print("unknown ..")
        }
    }
}

// network 연결을 체크하기 위해 만든 함수, DidAppear에 서버에 값을 가져오는 그런 화면에만 willAppear에 selector에 refresh해야하는 함수를 넣어주시면 됩니당!
extension UIViewController {
    func checkNetwork(toastView: UIView, selector: Selector) -> Bool {
        if NetworkMonitor.shared.isConnected == false {
            showNetworkToast(toastView: toastView, selector: selector)
        }
        return NetworkMonitor.shared.isConnected
    }
    
    func isNetworkConnected() -> Bool {
        return NetworkMonitor.shared.isConnected
    }
  
}
```

```cpp
// 사용하는 쪽
override func viewWillAppear(_ animated: Bool) {
        if isNetworkConnected() == true {
            refreshData()
        }
    }
    

    
    override func viewDidAppear(_ animated: Bool) {
        if checkNetwork(toastView: tableView, selector: #selector(refreshData)) == true {
            refreshData()
        }
    }
```
